function He(C,e){for(var A=0;A<e.length;A++){const s=e[A];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in C)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(C,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function A(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=A(n);fetch(n.href,o)}})();var be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Me(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var ve={exports:{}};(function(C,e){(function(A,s){C.exports=s()})(be,function(){return function(A){var s={};function n(o){if(s[o])return s[o].exports;var r=s[o]={i:o,l:!1,exports:{}};return A[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=A,n.c=s,n.d=function(o,r,l){n.o(o,r)||Object.defineProperty(o,r,{enumerable:!0,get:l})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,r){if(1&r&&(o=n(o)),8&r||4&r&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&r&&typeof o!="string")for(var g in o)n.d(l,g,(function(u){return o[u]}).bind(null,g));return l},n.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(r,"a",r),r},n.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},n.p="",n(n.s=0)}([function(A,s,n){n.r(s),n.d(s,"Game",function(){return x}),n.d(s,"moves",function(){return pe}),n.d(s,"status",function(){return Ee}),n.d(s,"getFen",function(){return De}),n.d(s,"move",function(){return ye}),n.d(s,"aiMove",function(){return Qe});const o=["A","B","C","D","E","F","G","H"],r=["1","2","3","4","5","6","7","8"],l={KING_W:"K",QUEEN_W:"Q",ROOK_W:"R",BISHOP_W:"B",KNIGHT_W:"N",PAWN_W:"P",KING_B:"k",QUEEN_B:"q",ROOK_B:"r",BISHOP_B:"b",KNIGHT_B:"n",PAWN_B:"p"},g="black",u="white",f=[0,1,2,3,4],P={0:1,1:2,2:2,3:3,4:3,5:4},E={0:2,1:2,2:4,3:4,4:5,5:5},v={fullMove:1,halfMove:0,enPassant:null,isFinished:!1,checkMate:!1,check:!1,turn:u},Q=Object.assign({pieces:{E1:"K",D1:"Q",A1:"R",H1:"R",C1:"B",F1:"B",B1:"N",G1:"N",A2:"P",B2:"P",C2:"P",D2:"P",E2:"P",F2:"P",G2:"P",H2:"P",E8:"k",D8:"q",A8:"r",H8:"r",C8:"b",F8:"b",B8:"n",G8:"n",A7:"p",B7:"p",C7:"p",D7:"p",E7:"p",F7:"p",G7:"p",H7:"p"},castling:{whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}},v),p={UP:{A1:"A2",A2:"A3",A3:"A4",A4:"A5",A5:"A6",A6:"A7",A7:"A8",A8:null,B1:"B2",B2:"B3",B3:"B4",B4:"B5",B5:"B6",B6:"B7",B7:"B8",B8:null,C1:"C2",C2:"C3",C3:"C4",C4:"C5",C5:"C6",C6:"C7",C7:"C8",C8:null,D1:"D2",D2:"D3",D3:"D4",D4:"D5",D5:"D6",D6:"D7",D7:"D8",D8:null,E1:"E2",E2:"E3",E3:"E4",E4:"E5",E5:"E6",E6:"E7",E7:"E8",E8:null,F1:"F2",F2:"F3",F3:"F4",F4:"F5",F5:"F6",F6:"F7",F7:"F8",F8:null,G1:"G2",G2:"G3",G3:"G4",G4:"G5",G5:"G6",G6:"G7",G7:"G8",G8:null,H1:"H2",H2:"H3",H3:"H4",H4:"H5",H5:"H6",H6:"H7",H7:"H8",H8:null},DOWN:{A1:null,A2:"A1",A3:"A2",A4:"A3",A5:"A4",A6:"A5",A7:"A6",A8:"A7",B1:null,B2:"B1",B3:"B2",B4:"B3",B5:"B4",B6:"B5",B7:"B6",B8:"B7",C1:null,C2:"C1",C3:"C2",C4:"C3",C5:"C4",C6:"C5",C7:"C6",C8:"C7",D1:null,D2:"D1",D3:"D2",D4:"D3",D5:"D4",D6:"D5",D7:"D6",D8:"D7",E1:null,E2:"E1",E3:"E2",E4:"E3",E5:"E4",E6:"E5",E7:"E6",E8:"E7",F1:null,F2:"F1",F3:"F2",F4:"F3",F5:"F4",F6:"F5",F7:"F6",F8:"F7",G1:null,G2:"G1",G3:"G2",G4:"G3",G5:"G4",G6:"G5",G7:"G6",G8:"G7",H1:null,H2:"H1",H3:"H2",H4:"H3",H5:"H4",H6:"H5",H7:"H6",H8:"H7"},LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A1",B2:"A2",B3:"A3",B4:"A4",B5:"A5",B6:"A6",B7:"A7",B8:"A8",C1:"B1",C2:"B2",C3:"B3",C4:"B4",C5:"B5",C6:"B6",C7:"B7",C8:"B8",D1:"C1",D2:"C2",D3:"C3",D4:"C4",D5:"C5",D6:"C6",D7:"C7",D8:"C8",E1:"D1",E2:"D2",E3:"D3",E4:"D4",E5:"D5",E6:"D6",E7:"D7",E8:"D8",F1:"E1",F2:"E2",F3:"E3",F4:"E4",F5:"E5",F6:"E6",F7:"E7",F8:"E8",G1:"F1",G2:"F2",G3:"F3",G4:"F4",G5:"F5",G6:"F6",G7:"F7",G8:"F8",H1:"G1",H2:"G2",H3:"G3",H4:"G4",H5:"G5",H6:"G6",H7:"G7",H8:"G8"},RIGHT:{A1:"B1",A2:"B2",A3:"B3",A4:"B4",A5:"B5",A6:"B6",A7:"B7",A8:"B8",B1:"C1",B2:"C2",B3:"C3",B4:"C4",B5:"C5",B6:"C6",B7:"C7",B8:"C8",C1:"D1",C2:"D2",C3:"D3",C4:"D4",C5:"D5",C6:"D6",C7:"D7",C8:"D8",D1:"E1",D2:"E2",D3:"E3",D4:"E4",D5:"E5",D6:"E6",D7:"E7",D8:"E8",E1:"F1",E2:"F2",E3:"F3",E4:"F4",E5:"F5",E6:"F6",E7:"F7",E8:"F8",F1:"G1",F2:"G2",F3:"G3",F4:"G4",F5:"G5",F6:"G6",F7:"G7",F8:"G8",G1:"H1",G2:"H2",G3:"H3",G4:"H4",G5:"H5",G6:"H6",G7:"H7",G8:"H8",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A2",B2:"A3",B3:"A4",B4:"A5",B5:"A6",B6:"A7",B7:"A8",B8:null,C1:"B2",C2:"B3",C3:"B4",C4:"B5",C5:"B6",C6:"B7",C7:"B8",C8:null,D1:"C2",D2:"C3",D3:"C4",D4:"C5",D5:"C6",D6:"C7",D7:"C8",D8:null,E1:"D2",E2:"D3",E3:"D4",E4:"D5",E5:"D6",E6:"D7",E7:"D8",E8:null,F1:"E2",F2:"E3",F3:"E4",F4:"E5",F5:"E6",F6:"E7",F7:"E8",F8:null,G1:"F2",G2:"F3",G3:"F4",G4:"F5",G5:"F6",G6:"F7",G7:"F8",G8:null,H1:"G2",H2:"G3",H3:"G4",H4:"G5",H5:"G6",H6:"G7",H7:"G8",H8:null},DOWN_RIGHT:{A1:null,A2:"B1",A3:"B2",A4:"B3",A5:"B4",A6:"B5",A7:"B6",A8:"B7",B1:null,B2:"C1",B3:"C2",B4:"C3",B5:"C4",B6:"C5",B7:"C6",B8:"C7",C1:null,C2:"D1",C3:"D2",C4:"D3",C5:"D4",C6:"D5",C7:"D6",C8:"D7",D1:null,D2:"E1",D3:"E2",D4:"E3",D5:"E4",D6:"E5",D7:"E6",D8:"E7",E1:null,E2:"F1",E3:"F2",E4:"F3",E5:"F4",E6:"F5",E7:"F6",E8:"F7",F1:null,F2:"G1",F3:"G2",F4:"G3",F5:"G4",F6:"G5",F7:"G6",F8:"G7",G1:null,G2:"H1",G3:"H2",G4:"H3",G5:"H4",G6:"H5",G7:"H6",G8:"H7",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_RIGHT:{A1:"B2",A2:"B3",A3:"B4",A4:"B5",A5:"B6",A6:"B7",A7:"B8",A8:null,B1:"C2",B2:"C3",B3:"C4",B4:"C5",B5:"C6",B6:"C7",B7:"C8",B8:null,C1:"D2",C2:"D3",C3:"D4",C4:"D5",C5:"D6",C6:"D7",C7:"D8",C8:null,D1:"E2",D2:"E3",D3:"E4",D4:"E5",D5:"E6",D6:"E7",D7:"E8",D8:null,E1:"F2",E2:"F3",E3:"F4",E4:"F5",E5:"F6",E6:"F7",E7:"F8",E8:null,F1:"G2",F2:"G3",F3:"G4",F4:"G5",F5:"G6",F6:"G7",F7:"G8",F8:null,G1:"H2",G2:"H3",G3:"H4",G4:"H5",G5:"H6",G6:"H7",G7:"H8",G8:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},DOWN_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:null,B2:"A1",B3:"A2",B4:"A3",B5:"A4",B6:"A5",B7:"A6",B8:"A7",C1:null,C2:"B1",C3:"B2",C4:"B3",C5:"B4",C6:"B5",C7:"B6",C8:"B7",D1:null,D2:"C1",D3:"C2",D4:"C3",D5:"C4",D6:"C5",D7:"C6",D8:"C7",E1:null,E2:"D1",E3:"D2",E4:"D3",E5:"D4",E6:"D5",E7:"D6",E8:"D7",F1:null,F2:"E1",F3:"E2",F4:"E3",F5:"E4",F6:"E5",F7:"E6",F8:"E7",G1:null,G2:"F1",G3:"F2",G4:"F3",G5:"F4",G6:"F5",G7:"F6",G8:"F7",H1:null,H2:"G1",H3:"G2",H4:"G3",H5:"G4",H6:"G5",H7:"G6",H8:"G7"}},H=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,0,1,0,0,1,0,.5],[.5,0,0,-2,-2,0,0,.5],[0,0,0,0,0,0,0,0]],M=[[-4,-3,-2,-2,-2,-2,-3,-4],[-3,-2,0,0,0,0,-2,-3],[-2,0,1,1.5,1.5,1,0,-2],[-2,.5,1.5,2,2,1.5,.5,-2],[-2,0,1.5,2,2,1.5,0,-2],[-2,.5,1,1.5,1.5,1,.5,-2],[-3,-2,0,.5,.5,0,-2,-3],[-4,-3,-2,-2,-2,-2,-3,-4]],I=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],q=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],U=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],Ae=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],ie={P:H.slice().reverse(),p:H,N:M.slice().reverse(),n:M,B:I.slice().reverse(),b:I,R:q.slice().reverse(),r:q,K:U.slice().reverse(),k:U,Q:Ae.slice().reverse(),q:Ae};function T(m){return p.UP[m]}function L(m){return p.DOWN[m]}function k(m){return p.LEFT[m]}function G(m){return p.RIGHT[m]}function N(m){return p.UP_LEFT[m]}function j(m){return p.UP_RIGHT[m]}function z(m){return p.DOWN_LEFT[m]}function Y(m){return p.DOWN_RIGHT[m]}function se(m){const i=N(m);return i?T(i):null}function ne(m){const i=N(m);return i?k(i):null}function oe(m){const i=j(m);return i?T(i):null}function ae(m){const i=j(m);return i?G(i):null}function re(m){const i=z(m);return i?L(i):null}function ce(m){const i=z(m);return i?k(i):null}function le(m){const i=Y(m);return i?L(i):null}function ge(m){const i=Y(m);return i?G(i):null}function ue(m,i){return i===u?p.UP[m]:p.DOWN[m]}function V(m,i){return i===u?p.UP_LEFT[m]:p.DOWN_RIGHT[m]}function _(m,i){return i===u?p.UP_RIGHT[m]:p.DOWN_LEFT[m]}function he(m,i){return i===u?p.DOWN_LEFT[m]:p.UP_RIGHT[m]}function fe(m,i){return i===u?p.DOWN_RIGHT[m]:p.UP_LEFT[m]}function K(m){return{k:10,q:9,r:5,b:3,n:3,p:1}[m.toLowerCase()]||0}function W(m){return typeof m=="string"&&m.match("^[a-hA-H]{1}[1-8]{1}$")}const $=-1e3,ee=1e3;class Z{constructor(i=JSON.parse(JSON.stringify(Q))){if(typeof i=="object")this.configuration=Object.assign({},v,i);else{if(typeof i!="string")throw new Error(`Unknown configuration type ${typeof config}.`);this.configuration=Object.assign({},v,function(a=""){const[c,h,t,B,w,d]=a.split(" "),b={pieces:Object.fromEntries(c.split("/").flatMap((S,J)=>{let F=0;return S.split("").reduce((R,O)=>{const de=O.match(/k|b|q|n|p|r/i);de&&(R.push([`${o[F]}${r[7-J]}`,de[0]]),F+=1);const Be=O.match(/[1-8]/);return Be&&(F+=Number(Be)),R},[])}))};return b.turn=h==="b"?g:u,b.castling={whiteLong:!1,whiteShort:!1,blackLong:!1,blackShort:!1},t.includes("K")&&(b.castling.whiteShort=!0),t.includes("k")&&(b.castling.blackShort=!0),t.includes("Q")&&(b.castling.whiteLong=!0),t.includes("q")&&(b.castling.blackLong=!0),W(B)&&(b.enPassant=B.toUpperCase()),b.halfMove=parseInt(w),b.fullMove=parseInt(d),b}(i))}this.configuration.castling||(this.configuration.castling={whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}),this.history=[]}getAttackingFields(i=this.getPlayingColor()){let a=[];for(const c in this.configuration.pieces){const h=this.getPiece(c);this.getPieceColor(h)===i&&(a=[...a,...this.getPieceMoves(h,c)])}return a}isAttackingKing(i=this.getPlayingColor()){let a=null;for(const c in this.configuration.pieces){const h=this.getPiece(c);if(this.isKing(h)&&this.getPieceColor(h)!==i){a=c;break}}return this.isPieceUnderAttack(a)}isPieceUnderAttack(i){const a=this.getPieceOnLocationColor(i),c=this.getEnemyColor(a);let h=!1,t=i,B=0;for(;T(t)&&!h;){t=T(t),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isRook(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}for(t=i,B=0;L(t)&&!h;){t=L(t),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isRook(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}for(t=i,B=0;k(t)&&!h;){t=k(t),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isRook(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}for(t=i,B=0;G(t)&&!h;){t=G(t),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isRook(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}for(t=i,B=0;_(t,a)&&!h;){t=_(t,a),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isBishop(d)||this.isQueen(d)||B===1&&(this.isKing(d)||this.isPawn(d)))&&(h=!0),d)break}for(t=i,B=0;V(t,a)&&!h;){t=V(t,a),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isBishop(d)||this.isQueen(d)||B===1&&(this.isKing(d)||this.isPawn(d)))&&(h=!0),d)break}for(t=i,B=0;fe(t,a)&&!h;){t=fe(t,a),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isBishop(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}for(t=i,B=0;he(t,a)&&!h;){t=he(t,a),B++;const d=this.getPiece(t);if(d&&this.getPieceColor(d)===c&&(this.isBishop(d)||this.isQueen(d)||this.isKing(d)&&B===1)&&(h=!0),d)break}t=oe(i);let w=this.getPiece(t);return w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=ae(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=ne(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=se(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=re(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=ce(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=le(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),t=ge(i),w=this.getPiece(t),w&&this.getPieceColor(w)===c&&this.isKnight(w)&&(h=!0),h}hasPlayingPlayerCheck(){return this.isAttackingKing(this.getNonPlayingColor())}hasNonPlayingPlayerCheck(){return this.isAttackingKing(this.getPlayingColor())}getLowestValuePieceAttackingLocation(i,a=this.getPlayingColor()){let c=null;for(const h in this.configuration.pieces){const t=this.getPiece(h);this.getPieceColor(t)===a&&this.getPieceMoves(t,h).map(B=>{B===i&&(c===null||K(t)<c)&&(c=K(t))})}return c}getMoves(i=this.getPlayingColor(),a=null){const c={};let h=0;for(const w in this.configuration.pieces){const d=this.getPiece(w);if(this.getPieceColor(d)===i){const b=this.getPieceMoves(d,w);b.length&&h++,Object.assign(c,{[w]:b})}}const t=this.getAttackingFields(this.getNonPlayingColor());if(this.isLeftCastlingPossible(t)&&(this.isPlayingWhite()&&c.E1.push("C1"),this.isPlayingBlack()&&c.E8.push("C8")),this.isRightCastlingPossible(t)&&(this.isPlayingWhite()&&c.E1.push("G1"),this.isPlayingBlack()&&c.E8.push("G8")),a&&h>a)return c;const B={};for(const w in c)c[w].map(d=>{const b={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling)},S=new Z(b);S.move(w,d),(this.isPlayingWhite()&&!S.isAttackingKing(g)||this.isPlayingBlack()&&!S.isAttackingKing(u))&&(B[w]||(B[w]=[]),B[w].push(d))});return Object.keys(B).length||(this.configuration.isFinished=!0,this.hasPlayingPlayerCheck()&&(this.configuration.checkMate=!0)),B}isLeftCastlingPossible(i){if(this.isPlayingWhite()&&!this.configuration.castling.whiteLong||this.isPlayingBlack()&&!this.configuration.castling.blackLong)return!1;let a=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("A1")==="R"&&!i.includes("E1")?a="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("A8")==="r"&&!i.includes("E8")&&(a="E8"),!a)return!1;let c=k(a);return!this.getPiece(c)&&!i.includes(c)&&(c=k(c),!this.getPiece(c)&&!i.includes(c)&&(c=k(c),!this.getPiece(c)))}isRightCastlingPossible(i){if(this.isPlayingWhite()&&!this.configuration.castling.whiteShort||this.isPlayingBlack()&&!this.configuration.castling.blackShort)return!1;let a=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("H1")==="R"&&!i.includes("E1")?a="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("H8")==="r"&&!i.includes("E8")&&(a="E8"),!a)return!1;let c=G(a);return!this.getPiece(c)&&!i.includes(c)&&(c=G(c),!this.getPiece(c)&&!i.includes(c))}getPieceMoves(i,a){return this.isPawn(i)?this.getPawnMoves(i,a):this.isKnight(i)?this.getKnightMoves(i,a):this.isRook(i)?this.getRookMoves(i,a):this.isBishop(i)?this.getBishopMoves(i,a):this.isQueen(i)?this.getQueenMoves(i,a):this.isKing(i)?this.getKingMoves(i,a):[]}isPawn(i){return i.toUpperCase()==="P"}isKnight(i){return i.toUpperCase()==="N"}isRook(i){return i.toUpperCase()==="R"}isBishop(i){return i.toUpperCase()==="B"}isQueen(i){return i.toUpperCase()==="Q"}isKing(i){return i.toUpperCase()==="K"}getPawnMoves(i,a){const c=[],h=this.getPieceColor(i);let t=ue(a,h);return t&&!this.getPiece(t)&&(c.push(t),t=ue(t,h),function(B,w){return B===u&&w[1]==="2"||B===g&&w[1]==="7"}(h,a)&&t&&!this.getPiece(t)&&c.push(t)),t=V(a,h),t&&(this.getPiece(t)&&this.getPieceOnLocationColor(t)!==h||t===this.configuration.enPassant)&&c.push(t),t=_(a,h),t&&(this.getPiece(t)&&this.getPieceOnLocationColor(t)!==h||t===this.configuration.enPassant)&&c.push(t),c}getKnightMoves(i,a){const c=[],h=this.getPieceColor(i);let t=oe(a);return t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=ae(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=se(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=ne(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=ce(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=re(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=ge(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=le(a),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),c}getRookMoves(i,a){const c=[],h=this.getPieceColor(i);let t=a;for(;T(t);){t=T(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;L(t);){t=L(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;G(t);){t=G(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;k(t);){t=k(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}return c}getBishopMoves(i,a){const c=[],h=this.getPieceColor(i);let t=a;for(;N(t);){t=N(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;j(t);){t=j(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;z(t);){t=z(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}for(t=a;Y(t);){t=Y(t);const B=this.getPieceOnLocationColor(t);if(this.getPieceOnLocationColor(t)!==h&&c.push(t),B)break}return c}getQueenMoves(i,a){return[...this.getRookMoves(i,a),...this.getBishopMoves(i,a)]}getKingMoves(i,a){const c=[],h=this.getPieceColor(i);let t=a;return t=T(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=G(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=L(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=k(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=N(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=j(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=z(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),t=a,t=Y(t),t&&this.getPieceOnLocationColor(t)!==h&&c.push(t),c}getPieceColor(i){return i.toUpperCase()===i?u:g}getPieceOnLocationColor(i){const a=this.getPiece(i);return a?a.toUpperCase()===a?u:g:null}getPiece(i){return this.configuration.pieces[i]}setPiece(i,a){if(!function(c){return Object.values(l).includes(c)}(a))throw new Error("Invalid piece "+a);if(!W(i))throw new Error("Invalid location "+i);this.configuration.pieces[i.toUpperCase()]=a}removePiece(i){if(!W(i))throw new Error("Invalid location "+i);delete this.configuration.pieces[i.toUpperCase()]}isEmpty(i){if(!W(i))throw new Error("Invalid location "+i);return!this.configuration.pieces[i.toUpperCase()]}getEnemyColor(i){return i===u?g:u}getPlayingColor(){return this.configuration.turn}getNonPlayingColor(){return this.isPlayingWhite()?g:u}isPlayingWhite(){return this.configuration.turn===u}isPlayingBlack(){return this.configuration.turn===g}addMoveToHistory(i,a){this.history.push({from:i,to:a,configuration:JSON.parse(JSON.stringify(this.configuration))})}move(i,a){const c=this.getPiece(i),h=this.getPiece(a);if(!c)throw new Error("There is no piece at "+i);var t,B;if(Object.assign(this.configuration.pieces,{[a]:c}),delete this.configuration.pieces[i],this.isPlayingWhite()&&this.isPawn(c)&&a[1]==="8"&&Object.assign(this.configuration.pieces,{[a]:"Q"}),this.isPlayingBlack()&&this.isPawn(c)&&a[1]==="1"&&Object.assign(this.configuration.pieces,{[a]:"q"}),this.isPawn(c)&&a===this.configuration.enPassant&&delete this.configuration.pieces[t=a,B=this.getPlayingColor(),B===u?p.DOWN[t]:p.UP[t]],this.isPawn(c)&&this.isPlayingWhite()&&i[1]==="2"&&a[1]==="4"?this.configuration.enPassant=i[0]+"3":this.isPawn(c)&&this.isPlayingBlack()&&i[1]==="7"&&a[1]==="5"?this.configuration.enPassant=i[0]+"6":this.configuration.enPassant=null,i==="E1"&&Object.assign(this.configuration.castling,{whiteLong:!1,whiteShort:!1}),i==="E8"&&Object.assign(this.configuration.castling,{blackLong:!1,blackShort:!1}),i==="A1"&&Object.assign(this.configuration.castling,{whiteLong:!1}),i==="H1"&&Object.assign(this.configuration.castling,{whiteShort:!1}),i==="A8"&&Object.assign(this.configuration.castling,{blackLong:!1}),i==="H8"&&Object.assign(this.configuration.castling,{blackShort:!1}),this.isKing(c)){if(i==="E1"&&a==="C1")return this.move("A1","D1");if(i==="E8"&&a==="C8")return this.move("A8","D8");if(i==="E1"&&a==="G1")return this.move("H1","F1");if(i==="E8"&&a==="G8")return this.move("H8","F8")}this.configuration.turn=this.isPlayingWhite()?g:u,this.isPlayingWhite()&&this.configuration.fullMove++,this.configuration.halfMove++,(h||this.isPawn(c))&&(this.configuration.halfMove=0)}exportJson(){return{moves:this.getMoves(),pieces:this.configuration.pieces,turn:this.configuration.turn,isFinished:this.configuration.isFinished,check:this.hasPlayingPlayerCheck(),checkMate:this.configuration.checkMate,castling:this.configuration.castling,enPassant:this.configuration.enPassant,halfMove:this.configuration.halfMove,fullMove:this.configuration.fullMove}}calculateAiMove(i){return this.calculateAiMoves(i)[0]}calculateAiMoves(i){if(i=parseInt(i),!f.includes(i))throw new Error(`Invalid level ${i}. You can choose ${f.join(",")}`);this.shouldIncreaseLevel()&&i++;const a=[],c=this.calculateScore(this.getPlayingColor()),h=this.getMoves();for(const t in h)h[t].map(B=>{const w=this.getTestBoard(),d=!!w.getPiece(B);w.move(t,B),a.push({from:t,to:B,score:w.testMoveScores(this.getPlayingColor(),i,d,d?w.calculateScore(this.getPlayingColor()):c,B).score+w.calculateScoreByPiecesLocation(this.getPlayingColor())+Math.floor(Math.random()*(this.configuration.halfMove>10?this.configuration.halfMove-10:1)*10)/10})});return a.sort((t,B)=>t.score<B.score?1:t.score>B.score?-1:0),a}shouldIncreaseLevel(){return this.getIngamePiecesValue()<50}getIngamePiecesValue(){let i=0;for(const a in this.configuration.pieces)i+=K(this.getPiece(a));return i}getTestBoard(){const i={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling),turn:this.configuration.turn,enPassant:this.configuration.enPassant};return new Z(i)}testMoveScores(i,a,c,h,t,B=1){let w=null;if(B<E[a]&&this.hasPlayingPlayerCheck()?w=this.getMoves(this.getPlayingColor()):(B<P[a]||c&&B<E[a])&&(w=this.getMoves(this.getPlayingColor(),5)),this.configuration.isFinished)return{score:this.calculateScore(i)+(this.getPlayingColor()===i?B:-B),max:!0};if(!w)return h!==null?{score:h,max:!1}:{score:this.calculateScore(i),max:!1};let d=this.getPlayingColor()===i?$:ee,b=!1;for(const S in w)b||w[S].map(J=>{if(b)return;const F=this.getTestBoard(),R=!!F.getPiece(J);if(F.move(S,J),F.hasNonPlayingPlayerCheck())return;const O=F.testMoveScores(i,a,R,R?F.calculateScore(i):h,J,B+1);O.max&&(b=!0),d=this.getPlayingColor()===i?Math.max(d,O.score):Math.min(d,O.score)});return{score:d,max:!1}}calculateScoreByPiecesLocation(i=this.getPlayingColor()){const a={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7};let c=0;for(const h in this.configuration.pieces){const t=this.getPiece(h);if(ie[t]){const B=ie[t][h[1]-1][a[h[0]]];c+=.5*(this.getPieceColor(t)===i?B:-B)}}return c}calculateScore(i=this.getPlayingColor()){let a=0;if(this.configuration.checkMate)return this.getPlayingColor()===i?$:ee;if(this.configuration.isFinished)return this.getPlayingColor()===i?ee:$;for(const c in this.configuration.pieces){const h=this.getPiece(c);this.getPieceColor(h)===i?a+=10*K(h):a-=10*K(h)}return a}}class x{constructor(i){this.board=new Z(i)}move(i,a){i=i.toUpperCase(),a=a.toUpperCase();const c=this.board.getMoves();if(!c[i]||!c[i].includes(a))throw new Error(`Invalid move from ${i} to ${a} for ${this.board.getPlayingColor()}`);return this.board.addMoveToHistory(i,a),this.board.move(i,a),{[i]:a}}moves(i=null){return(i?this.board.getMoves()[i.toUpperCase()]:this.board.getMoves())||[]}setPiece(i,a){this.board.setPiece(i,a)}removePiece(i){this.board.removePiece(i)}aiMove(i=2){const a=this.board.calculateAiMove(i);return this.move(a.from,a.to)}getHistory(i=!1){return i?this.board.history.reverse():this.board.history}printToConsole(){(function(i){process.stdout.write(`
`);let a=u;Object.assign([],r).reverse().map(c=>{process.stdout.write(""+c),o.map(h=>{switch(i.pieces[`${h}${c}`]){case"K":process.stdout.write("♚");break;case"Q":process.stdout.write("♛");break;case"R":process.stdout.write("♜");break;case"B":process.stdout.write("♝");break;case"N":process.stdout.write("♞");break;case"P":process.stdout.write("♟");break;case"k":process.stdout.write("♔");break;case"q":process.stdout.write("♕");break;case"r":process.stdout.write("♖");break;case"b":process.stdout.write("♗");break;case"n":process.stdout.write("♘");break;case"p":process.stdout.write("♙");break;default:process.stdout.write(a===u?"█":"░")}a=a===u?g:u}),a=a===u?g:u,process.stdout.write(`
`)}),process.stdout.write(" "),o.map(c=>{process.stdout.write(""+c)}),process.stdout.write(`
`)})(this.board.configuration)}exportJson(){return this.board.exportJson()}exportFEN(){return function(i){let a="";Object.assign([],r).reverse().map(w=>{let d=0;w<8&&(a+="/"),o.map(b=>{const S=i.pieces[`${b}${w}`];S?(d&&(a+=d.toString(),d=0),a+=S):d++}),a+=""+(d||"")}),a+=i.turn===u?" w ":" b ";const{whiteShort:c,whiteLong:h,blackLong:t,blackShort:B}=i.castling;return h||c||t||B?(c&&(a+="K"),h&&(a+="Q"),B&&(a+="k"),t&&(a+="q")):a+="-",a+=" "+(i.enPassant?i.enPassant.toLowerCase():"-"),a+=" "+i.halfMove,a+=" "+i.fullMove,a}(this.board.configuration)}}function pe(m){if(!m)throw new Error("Configuration param required.");return new x(m).moves()}function Ee(m){if(!m)throw new Error("Configuration param required.");return new x(m).exportJson()}function De(m){if(!m)throw new Error("Configuration param required.");return new x(m).exportFEN()}function ye(m,i,a){if(!m)throw new Error("Configuration param required.");const c=new x(m);return c.move(i,a),typeof m=="object"?c.exportJson():c.exportFEN()}function Qe(m,i=2){if(!m)throw new Error("Configuration param required.");const a=new x(m).board.calculateAiMove(i);return{[a.from]:a.to}}}])})})(ve);var we=ve.exports;const Ie=Me(we),Pe=He({__proto__:null,default:Ie},[we]),Se={move_1:"data:audio/wav;base64,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",move_2:"data:audio/wav;base64,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",move_3:"data:audio/wav;base64,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",move_4:"data:audio/wav;base64,UklGRg4OAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAATElTVBoAAABJTkZPSVNGVA0AAABMYXZmNjIuMy4xMDAAAGRhdGHIDQAADwAPAA0AAwDr/+3/8P/b/87/tP+8//D/7f/a//P/BQAPAB8AHgAFAP3/HQAhAAYACQD5/+n/BQADAPz/EwARAAoABQDx/9v/1//9/wcAAAAeABEA6P/q/+T/0P/Q/9T/1v/P/8z/0f/b/9n/5f/5/wAAFQAFAOD/1v+8/7n/4P/V/8n/9//y/7f/xP/l/+f/9f/x//r/IAA6AC4AGAAOAAYADAAFAOv/3//u/wYABwACAA0AIAA1AEsAZABpAG0AZwBJADoAJQAoADMADwDr/+v/+P/z/wMAGgAUAAcACgAVABMAGwA0ABkA+/8DAPr/6//n//L/AwAAAP7/FAAMAAAADQD5/+D/AAAVAOf/wf/M/+//DwAaABAA9//w//T/7P/2/xQAIAAiACEA8/8BACAA8//w/zUAfgCNAG4AeQB9AEkAKQAXAA4ALAAyAAUADgAoACUANAAVAAEADADz/8//vP+8/6f/nf+t/8v/x/+n/4r/hf+a/7z/9//8/+D/w/8g/4P+2P0r/Gb5ifWq8lLuouKa04fHK74MvEPFXNQI6AABqRl3LQw96UqNVJJVDFGJSLA9AzSFKLcaCw6cBbQB8v/3/8sBAwS7BT0HhAhmCLcHMQb1/+72ePDu6w3o0efx6uXudvTk+Qn9gf/DAYwBFf169SXuKekz5THh091d26rZxth31y/VpNSL1tzYn9pw3O/f7+X27VD3hQAbCcQRXhndHqch8yGBIZUgzh6AHIUZnhbuFM0TNxJTEFUPtQ9+ENMQLBDcDqwNygy7C68KgwnyB/oGSAYPBU0D+ADb/qP92PwE/Hb7OfuF+2D8+PwJ/Vf9Iv7K/sL+L/5S/Vn8ivs4+oL4Pfc79n31W/Vy9V/1rvWL9sb3HflZ+vP7kP3K/rf/LwChABcBXgHLAf4B9wEQAgMCMAKMAoICFgJgAaAA0P+l/jP96fv1+mz6L/oc+rj6Afxb/ab+/P9cAcoC+APOBCYFrQT4AzkD5AE0AJr+OP1e/Pz7//uD/GL9qf7n/88AqgFfAs4C/QLeAm0CzQF6AZIBtgECAr4CvAPLBAcGMwdHCFcJ8QkWCssJ/Aj1B5UG1wQAAxUBSv+x/S38DftY+sb5ffnS+X36/fp1+yr8r/y8/J/8Ufy3+xj7dfq5+ST5qfgp+M73nPdp90/3q/dh+BL56vk2+938zP7gAN8C0ASUBvkHAwmcCaIJFwkzCCYH+QW5BGgD/QGrAJv/uf77/Yr9hP3U/WL+Q/9jAIABmwLKA/ME3gVgBo0GmAaABikGrAU3BcYETgTwA8ADiQM/AwkD6ALHAo8CRAL7AZ4B7wDr/8n+cv3c+1P68/it96T2+PWJ9WD1nfUV9q72mffe+Dr6k/vr/BT+GP8GAKQABwFTAV4BHwG0ACwAfP+z/v79XP24/FD8J/wa/D38jvz5/Jf9Zf4+/xcAzwCkAaUChwNeBBYFpAU8BtIGRgdqBykHzAZZBqAFzwTkA/gCMwJ7AdkAPgC7/43/gf9s/0f/Ff8F/xL/Df/g/rf+p/7D/gv/Vf+5/0EA5gDOAbYCWwPzA2wEwQTyBK8EKQSrA+8CAwIdARcAGv9X/qD94vw//MH7bftL+z/7Nvte+9T7Y/z+/K/9Qv6x/i3/fv+C/3T/V/8W/8r+i/5Q/i/+Qf5q/pL+w/76/kn/kv+3/7P/hv9h/y//xP4p/n/92/xb/AX8wPu6+/f7YPwg/Rv+Jf84AFoBkwK+A7kEhAUqBp0G7QYNB+IGfwYLBqcFPAWzBBUEhQMCA3YC3gE1AY4ACACw/2j/Nv8+/3b/0P8nAGMAigCnAJsAbAAGAE3/lv73/Uz9pfwt/Nj71Ps1/Lr8XP0b/tj+pv91ABkBkAHSAfkB5AGcAV0B9wB5AB0A2P+c/1r/Gv/t/sv+uP6G/hv+rv10/V39Qv0f/RT9Qf2g/RX+Yv6W/s7+Cf9N/2H/Z/9j/27/of/L/9//+/9CAKUAEgFtAcoBNgKvAhADTAOOA7oDtgOJAy0DnAIQAqgBNwG6ADAAxP+m/5j/fP9h/3H/j/+y//P/QwB9ALAA/QAlASsBJAETAewAugCGAE4A/v+c/1H/Df/o/t7+2P7a/vz+M/9x/7D/4/8vAHkAlABxACAA4f+4/4H/Nf/q/rL+jv6e/rn+wP63/sP++f4R/x3/Jv8m/zj/Tv8+/y7/QP9Y/2j/U/9L/1X/Rf9B/1z/aP+I//f/ZwDzALABXQLpAlwDwQMLBCQEAQSzAzwDqAIaAqABGwGjAFIA/f+j/0z/6v6H/i3+3v2S/Vb9U/1R/TD9OP0i/cD8Yvwg/OT7ofuZ+8z7LPzi/NH95/4WACUB8QGQAhcDeAN2AxgDiALnAU4ByABXAOX/kf+Y/9j/DABDAGkAigDUABoBJQEDAfwAJAFRAVkBSAFOAWQBYgFAAfQAcAD9/63/OP+p/ib+t/2C/Zb9u/3l/Sn+jP4U/5X/BQB7AOgAQwGIAbkB0wHSAagBawFPAT8BGAH/ABUBLAE1AWEBqQHfAQICIwI3AhYC/AH7AcABbQE+ASEBHgFHAVEBKwEZAQoB0gB9ADkA/v/A/4v/O//Y/n3+HP6v/V/9B/2V/Ej8EPzs++P7+vs9/Jr83vwP/Vj9lf2y/aT9ef1M/Sv9Dv3i/Mj82vw8/cn9TP7x/sX/qQCNAWACBwNtA5sDoQNsAwgDfgLmAYoBSQEVAQ0BLAFbAY8BzQESAjUCNQJTAmQCPgLgAXgBIAGvAGUALwDc/8X/6//l/8z/yf+a/1X/E/+9/lH++P22/XX9RP02/XD92v1w/hL/r/9mACQB2AFTAroCLQN/A70D7gPpA6wDgwM9A9ACkQJjAi0CCwIHAhYCMQI5AisCBAK2AUIBlADK/wL/Pv59/cL8IPy3+3j7Svs3+z77Yful+wz8ffzQ/CH9ff25/an9cv1W/Uj9OP0M/dP8nPyH/KD8uvwD/ZP9Ov7y/pj/EgCPABABbAGxAeoB9wHqAfABBAIOAhcCIwI6AmoCvQI5A7UDGgR7BNMEAwUIBQQF6ASeBEQE7gN5A/kCgQLlATYBnAAMAIv/HP+o/kT+C/7n/cr9vf3B/c396P0M/hz+Of57/r3+/f4f/x7/D/8E/xH/C//4/gH/IP9D/1v/av99/6H/3v8QACYASwCOAMwA9QACAQIBBgERAQoBzwBoAPn/uv+i/4L/YP9y/7z/MQC3AA8BVQGjAd0BywFkAc8AFgBJ/17+ff2x/Bn81/vH++T7K/yg/EL9FP7K/m3/GQCIANAAAAENASEBKgEbAR0BDAHoANgAzADSAO4AIAF1AdYBTQLpAm4DwgPyA+0DvANQA5wCvAHYAAoARP+T/gn+r/2C/Wb9Tv1H/U79Y/2C/XT9V/1i/Yr9zP0O/ib+Mf5L/k/+NP72/aX9e/1+/XH9Wf17/dD9XP7e/kD/xv9kAP0AiQH8AUkCngIjA68DCgRIBIQEkQRxBEsEDgS/A4gDTgPoAnICEwLjAeYB7gH+AS8CZQKsAukCBQP2ArkCXALRASgBdAC//wX/RP5+/d38d/xI/GX8rfz9/E/9tP0e/mf+m/65/qn+jP5o/g3+mv0m/cj8nPxy/Ez8XPyh/BP9kP3v/UP+uf5S/9L/NgCFAJ0AqADJAOIA1gCpAJcAlwB8AFgANwAXAA8AKgBMAFUAagCpAOAA/AAXASABHAEoAT0BPwErAScBHQEgAT0BNwEdAQYB3QDBAKYAYwAhAOr/0P/i/93/0//v/wwALQBZAHEAjgCzAPEAQAFqAY4BxAH5AQwCBALhAaABbQFWASEBtgBiAAsAlf8g/6D+Kf7D/VL99fzX/Of8Jf2g/T3+6P6v/4UAKgGJAbUBswGUAVsB/gCVAC4AqP8Z/5v+Kf67/V/9Ev26/JD8h/yM/Lb8Bf2Q/Tb+4v6T/0gA4wBYAa0B2gHqAcEBbgEMAbEAdQBLAEwAawCVAO8AVgGrAQcCVgKGArgC0AKtAn4CNQLKAVwB5gBiAOT/k/89/9b+if5J/h/+MP53/sr+K/+M/+L/SACwAAYBSgFtAWsBVQEvAfQAngBHAPH/i/8z/+D+hf44/v393f3Q/dL94/3z/QL+M/6R/u/+UP+3/yYAnwASAXYByAEKAjYCXAJXAkMCQwJFAk0CYQJ0AlYCKAL0AZIBDAF2AMD/AP9f/tL9Vf37/Nn89vxP/cf9PP7A/k//1/9BAJEA2AANAS0BLgEVAdwAmQBXAPb/ev8B/4D+EP7J/ZP9gP2l/en9Pf6W/vT+Yv/I/wQAHQAbAP3/1v+m/2v/Lf/u/sX+sv63/uL+I/98//f/egDsAE4BmQHNAdwBvAF2ASIB1AB8ACsAAwD+/xwAYwDUAEYBpwEWApEC6gITAyUDIgPqAo8CJwK6AUwB5ACNAD8A7P+o/3n/QP8C/8f+iv5I/gr+2f2+/a/9qP2+/fv9VP61/hv/ev/G/wYAUgCQAKEArgCzALAAvADQAOIA8wAFAREBDQHwAMcAnwB/AGwAYgBhAGsAggCuAOQA/ADuAMkAkABEAOr/l/9S/xL/4/7V/tX+0/7u/h7/Qf9O/0j/Ov8r/xv/BP/w/ur+/v4I/+3+wv5//h/+q/04/d38q/yN/JL83/xg/Qv+1f6r/3gAKAGvAQ0CKAIHAtQBhAEUAagAVAAkABsALgBVAIkA1QArAX8BvwHiAe8B3wGsAWYB",move_5:"data:audio/wav;base64,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",quick_1:"data:audio/wav;base64,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",quick_2:"data:audio/wav;base64,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",pop_check:"data:audio/wav;base64,UklGRg4OAABXQVZFZm10IBAAAAABAAEAIlYAAESsAAACABAATElTVBoAAABJTkZPSVNGVA0AAABMYXZmNjIuMy4xMDAAAGRhdGHIDQAA+v/v//j//v8BAA4AFgAIAAwAFgAkABkAIgAqABsAGgAoACEAHQAjAAwABQAdABEAAAAIAPb/5f/z/+3/8f/5/+//9v/+/+v/8/8BAOr/8//r/+L/9f/y/+P/9//3/9b/6/8NABsAJAAfAP7/FgAeAA4AGgAeAB4AFgAPAPv/AAD9//f/BAAMAP7/GgASAPb/FgAXABAACAADAP7/CQAIAAMAAgADAP7/EAAMAPH/+v/9/wQA9//w/+//6v/p/93/4P/r/+b/3//d/+L/AQD0//j/CgD2//T/AwALAAYABgDy//f/7P/c/+L/9//l/+X/2v/N/9z/1P/Z/+n/4v/Z//D/8P/o//L//f/1//P///8EAAkACAD//wQAEQAMAAkAEgAVAC8ALAAbABgAKQA7ADYAHgAZAB8ADgABAAsAEwAVABUA+v///xUACQARAAMA9f/8/xAAAQD3/wYAGQAVACQAEAD6/x8AGgAZABAAEQAQACAABQD7/wYAAwDx//v/5//e//T/2f/h//H/9//5/+7/7/8DAAEA+/8BAAIA+f/6/xQAAgD4//T/9f/8//v//P/7//7////4//X/7v/i/+b/8P/3/+3/7P/z//j//P8DAAgAEgD///7/CQADAPD//P///xIAFAACAPn/BAD7////DgAHAAQADgAHAP3/GgANAAMACgAAAAYAEAAFAA8AHQAQAA8ACwAFAAUAGAAYAAkADQD3/wMAFAD7/+7/7//k//X/9P/q/+n/+f/x/+n/+f/r/+j/5//V/+X/5v/d/+T/6f/v//j/5f/s//3/AAAJACAAHwAKABAAFQALABYAHgALAAMA+P8FAPD/9f/1/wAAHAASAAcADwAJAAQAGgAKAAAABwAEAP3/EgAFAPP/+f/4/wUAAgDz//P/9P/1/wAAAQDp/+L/4//a/9X/3f/a/9P/0v/U/+D/4//Y/+P/8P/k////AgDy/wEA/P/6/wAA7P/f/+j/6//u//b/9//n//T/AwD2/wAA/v/9/xEAAQANABUAAgAQABoAIQAZABsAEQAeACEADwAUACYAHQAaABkAIQArADAANAAlACYAGAASABMAEAABABgADgABABwACwANABcAGQAiACkADQAVABgACgAOABwAFgATAAsA/v///wMA9//u/wQA+v/u/+T/1v/Y/93/xv/P/87/tP/H/9D/0v/i/8//rv/I/87/2P/o/9X/y//V/+L/4v/u/+H/7v/6//j/5f/7/wsADwAeABUA/P/7/wwACgAgABgAEwArAC8AJQAzAEsAKwA3AC8AGgAtAB0ACgAFAAMAFgATAAwA+v8LABoAEAANABoAHAANABcAFwACAPT/7//6/woA/P8EAAQA/P8FABgACQAXACcAIwAmACIADwANABIAGgAbABMADQAHAPD/6v/l/9r/zv/O/9z/2v/Q/9j/xv/V/9b/6P////r//P8FAAQACwALAPr/EAAVABgAHAAlABwAFgAYABgAGAARABAABAD+////9P/z/9//5//v/+n/8P/v//b//P////z//P8CAAQACwD2/+7/+//9/xkAFQD6//f/CQAAAPf/8P/3/wgADADz//7/EwAFAPn/9f8AAPz/BQAAAAQABgAOAB0AKQAdABYAIgAOAP3//f/9/wUACgAQAPb/8//h//D/9v/1/+z/7f/x/+n///8DAPz/8//o//L//P/v/+r/6v8DABIAEgAKAAYAIAAiAAwADQARABMAGwAUABIAGQALAAwACgAUABgAFwAXABUAHAAfAB0AJwAZABYAGgARAPn/AAAHAPr/6f/x/+3/4//s/+3/6v/p//L/AgD8/9b/5P/0//z/BwD0/+j/7f/m/+D/0v/j/+3/5f/l/+L/5v/X/9b/1f/g/+f/4//n/+L/7v8IAPX//v8BAAQAGgAIAAEA8P8EAPz/DwAQAA0AGgAVACwAKwAqACMAMQA9ACcAHgAsACIAIwAiAB8AKwAuABYAEQAZAAwAGgAPAPn/CgD4/+X/+//7//P/9P/w//D/8v/o/+z/BwAFAPn/6//q/9r/6v/q/9X/6//l/+L/6f/m/9T/2v/Z/93/4f/s/9v/7v/x/+L/6f/c/9//5//x//j//v/r/9//6P/g//L/+f/z//b/3P/1/wEA7P8PABkAHAD6//3//f8CABIABAAQAAgADgAPAAsAEAAdACUAIwAXABkAEgATABUAEQAMABEAFQAKAAgA+//m//f/AQALAAIADQAUABEAEAD//wMABAD8//3/9P/w//n/6v/p//7/9P/7/wYAAQD3/wIA/P8FAAoACwAIAAQA+f///wQA9v/x/w0AFgAhAEAAMAAcABoABwDv/xoA9v/u//X/7f/y/+X/0//f/+//3v/Z/9z/yf/P/9H/0f/Z/9z/yv/Y/+b/4//r//v/4v/1//D/7v8NAAcAFQAmACMAGQAZABUACAAbACMAFAAeACYAJgAuADAAJAApACcAMAArABUACgARAAYACAANAP7/+f8KAAYA9/8GAAIA/f8YABgAEQAJAAYADAAFAP////8FAAcA9//8//v/AAAMAA4ACAD5/wQA///6////BgABAPz/AQD3//X/+f/y/+j/6f/1//v/9//2/+7/9v8FAAMABAAJAPv/CAD8//7/BgANAB0AEwAfABgAGwATABEAHAAcABkAHgAVAAcAHQAVAAoABgAIAPj/+v///+r/+v/9//7////7/wQACgAMAAAA9P/x//n/9//r/+j/9P/3/wEA+//s////6f/o//3/+v/4/xEADQAAAPz/AgABAPT//f///w4AGQATAA8ADgAAAA0AAwD7/wMAAAABAAEABgAFAAQA+v/2//P/AQDr//D/+f/y/wQA6//k//T/8v/4/+f/9//6//r////4/wIA9/8IAAgADAALABUAGgATABoA/v8EAPP/5v/2//L/8v8GAAQA7P/7/wUA//8HAAgAAAAIAP3/8f/7/wIACgADAO3//v/2//7/AgAMABQABwABAAgADwAHAPL/4v/z//f/9P/4/+7/+f/w/wEAAgDz//f/9f/0//D/6//h/9v/+P/5/+r/7f/9/+L/6P/m//D/CgANAAIADwAVAAUAAgAOAAIAAgAPAAsA/f/Z//T/8f8DABAABQD5//P/BgAmADIARgA7ACAA8v8HAAsANgAmAOb/9P/Z/xsAXAAQAEEADgD6////4v/q/97/1P/y/x8A5P+5/ykACQAQAGEAHQDS/wQAxP+a/+z/rP/B/+f/GADH/xkAKAAVAKYAEgBLAOf/Sv/d//X/8P+YAOf/X//R/1MAJQBxAC4Asf83AJf/8P9nADAA8v/u/23/Kf/Z/44ASgA6ADn/lv+P/5T/1wCUAMr/BgCd/w8A6gD6/2cAGAB0/3r/VgDF/3EAzgDU/ycAs/8bAFABngDb//v/Ef9b/93/wQBbAH//F/92/6v/sP8dAKYAn/9QABUAg/+QAEgAngC/AGv/5v41ANf/rv9IAGP/Of9cAIj/lQDpAG0A3wB5AN0ASABaAKn/nv+O/8z+o/8X/87+6/92ANX/UwG3AFj/cACHAbIApgCWAPT/e//J/7v/dP/A/3sAZABF/2v/Xv5V/vcAIgASAEsACP+dAGUAXAB1Af8AU/+Q//n+Kv4d/2//Ff+U/jIABAGt/6QBiAFTARUC2wBwAKT/c//h/qr+l/8+/9L9Jv84/+f/8AAO/1QAWwCcAW8BCgA1AYMApwBWAK7/VAC3AIYAMP8BAET/1v5qANX/lP+M//n/KgEPAcQAIP+9/9IA2f5//8b+Sv9OAN//NwANAc8AMAE4AO//MwGWAXL+CP8wAHP+mP4p/9n/PwACAb8AfP7J/p0AigAuAZ7/gP4K/939RAAN8m4S5jBH9S3YbaQWtowBCgJ465DLLe4UC2UYLEZYY/9//38kYkQ9fgxRA7f1TtfWwQaFXZI1lsmKOdYH/lXifQysRRc78iqjM4Q31jeSMqH66vJq4GS/Y80i4RTcRdWW4CTlSO8hAR38rxMXKQEYSyS/HxAJWhQREUL/OAiLBYD/QARNA0P0ZvJ5+P3xBfeVAWr8IP5rCu0FOgxxDi8ApQdWCdT+awHO/rrsXerK73bwIO+Y8pny8PmBABv/KQrODecG8AsZDccGrgpiDWoJ+AjZAY767ABTAb76EwCWAHj7AAD8AH788/8vAkcCOQliB0r/7wAV/337qwDv/wf8jfs4+sD6oP1d/B74av1w/pL4Xv1v/0H97wLdBSUELgWuAtsAnAKzAUb/rQAaAGn8GPty/TD85Pxe/hD+VAHuAen+awBiAfP+rgHgA4UB9gC7AIIAqQJ+/yL+nQLd/7D8rv4n/kX+WAF5AFAAowKwAUMBOQQsAXr/EQM1AHr+Vf/f/AT9CgAJ/0D/DgGw/6//ZgGMAH0AyQLcA1sCLwLGAccA6gHAACT/n/6E/AD82/xA/Hf8af3r/fT+qP8s/0sAlgEFAND/1wCfABsBhQGTAeABPgLHAS4BvABY/n797P63/v/+v/4e/uf/WQGeAFgAxQAVAC8BwAHM/2IBeAIYAn0DTQLUAPAAkP8R/sj+Uf/e/FX8y/19/Mb77/uQ/DD+Vf4y/+4BjALbAUMDhwTcA8ADKQTZA/MCiwG7AB0Aqf5a/nT/gP8C/77/WADI/2z/x/8kACIAdf+z/pb+"};window.jsChessEngine=Pe;console.log("Chess engine modules:",Object.keys(Pe));class ke{constructor(){this.engine=new window.jsChessEngine.Game,this.selectedSquare=null,this.possibleMoves=[],this.boardFlipped=!1,this.orientationMode="handoff",this.gameMode="human-vs-bot",this.humanColor="white",this.botDifficulty=1,this.allowUndo=!0,this.soundEnabled=!0,this.originalGameMode="human-vs-bot",this.originalHumanColor="white",this.colorChangedMidGame=!1,this.originalBotDifficulty=1,this.difficultyChangedMidGame=!1,this.board=this.engineStateToBoard(),this.currentPlayer="white",this.gameStatus="playing",this.stateHistory=[],this.currentStateIndex=0,this.isInUndoRedoState=!1,this.lastUndoWasBotMove=!1,this.moveHistory=[];const e=this.engine.exportJson();this.stateHistory.push({engineState:JSON.parse(JSON.stringify(e)),move:null,notation:null,timestamp:Date.now()}),this.sounds=this.createSoundSystem(),this.checkDepth=0,this.checkOperations=0,this.maxCheckDepth=10,this.maxCheckOperations=1e3,this.isEndgameDetection=!1,this.castlingRights={white:{kingside:!0,queenside:!0},black:{kingside:!0,queenside:!0}},this.enPassantTarget=null}async makeMove(e,A,s,n){const o=this.coordsToSquare(e,A),r=this.coordsToSquare(s,n);try{const l=this.board[s][n],g=l!==null,u=this.board[e][A],f=this.engine.move(o,r);this.updateCachedState(),this.boardFlipped=this.determineOrientation();const P=this.updateGameStatus();if(P){const Q=this.currentPlayer==="white"?"White":"Black"}const E=this.generateMoveNotation(e,A,s,n,u,l,this.gameStatus==="check",this.gameStatus==="checkmate"),v=this.generateMoveCommentary(e,A,s,n,u,l,null);return this.recordGameState({from:{row:e,col:A},to:{row:s,col:n},piece:u,captured:l,notation:E,commentary:v}),g?this.playSound("capture"):this.playSound("move"),this.gameStatus==="checkmate"?setTimeout(()=>this.playSound("checkmate"),g?100:0):this.gameStatus==="check"&&setTimeout(()=>this.playSound("check"),g?100:0),await this.autoSave(),{success:!0,enteredCheck:P}}catch{return{success:!1,enteredCheck:!1}}}getPossibleMoves(e,A){const s=this.coordsToSquare(e,A),n=this.engine.moves(s);return!n||n.length===0?[]:n.map(o=>{const r=this.squareToCoords(o);return{row:r.row,col:r.col}})}updateGameStatus(){const e=this.engine.exportJson(),A=this.gameStatus;return e.checkMate?this.gameStatus="checkmate":e.isFinished&&!e.checkMate?this.gameStatus="stalemate":e.check?this.gameStatus="check":this.gameStatus="playing",A!=="check"&&this.gameStatus==="check"}updateCachedState(){const e=this.engine.exportJson();this.board=this.engineStateToBoard(),this.currentPlayer,this.currentPlayer=e.turn,this.castlingRights={white:{kingside:e.castling.whiteShort,queenside:e.castling.whiteLong},black:{kingside:e.castling.blackShort,queenside:e.castling.blackLong}},this.enPassantTarget=e.enPassant}isBotTurn(){return this.gameMode==="human-vs-human"?!1:this.currentPlayer!==this.humanColor}async generateBotMove(){try{const e=this.board,A=this.engine.aiMove(this.botDifficulty);this.updateCachedState();const s=this.updateGameStatus(),n=Object.entries(A);if(n.length>0){const[o,r]=n[0],l=this.squareToCoords(o),g=this.squareToCoords(r),u=this.board[g.row][g.col],f=e[g.row][g.col],P=this.generateMoveNotation(l.row,l.col,g.row,g.col,u,f,this.gameStatus==="check",this.gameStatus==="checkmate"),E=this.generateMoveCommentary(l.row,l.col,g.row,g.col,u,f,null);return this.recordGameState({from:l,to:g,piece:u,captured:f,notation:P,commentary:E}),f?this.playSound("capture"):this.playSound("move"),this.gameStatus==="checkmate"?setTimeout(()=>this.playSound("checkmate"),f?100:0):this.gameStatus==="check"&&setTimeout(()=>this.playSound("check"),f?100:0),await this.autoSave(),{from:l,to:g,piece:u,enteredCheck:s}}}catch{}return null}async executeBotMove(){const e=this.gameMode==="human-vs-bot",A=this.isBotTurn(),s=this.gameStatus==="playing"||this.gameStatus==="check";if(!e||!A||!s)return{success:!1,enteredCheck:!1};const n=Date.now(),o=await this.generateBotMove();if(!o)return{success:!1,enteredCheck:!1};const r=o.enteredCheck||!1,l=Date.now()-n,g=800+Math.random()*400,u=Math.max(0,g-l);return await new Promise(f=>setTimeout(f,u)),await this.autoSave(),{success:!0,enteredCheck:r}}recordGameState(e){this.currentStateIndex<this.stateHistory.length-1&&(this.stateHistory=this.stateHistory.slice(0,this.currentStateIndex+1)),this.isInUndoRedoState=!1;const A=100,s={engineState:null,move:{from:e.from,to:e.to,piece:e.piece,captured:e.captured},notation:e.notation,commentary:e.commentary,timestamp:Date.now()};this.stateHistory.push(s),this.currentStateIndex++,this.stateHistory.length>A&&(this.stateHistory.length-A,this.stateHistory=[this.stateHistory[0],...this.stateHistory.slice(-99)],this.currentStateIndex=this.stateHistory.length-1),this.moveHistory||(this.moveHistory=[]),this.moveHistory.push({from:e.from,to:e.to,piece:e.piece,captured:e.captured,notation:e.notation}),this.moveHistory.length>A-1&&(this.moveHistory=this.moveHistory.slice(-99)),this.autoSave().catch(n=>{})}coordsToSquare(e,A){const s=["A","B","C","D","E","F","G","H"],n=["8","7","6","5","4","3","2","1"];return s[A]+n[e]}squareToCoords(e){const A=["A","B","C","D","E","F","G","H"],s=["8","7","6","5","4","3","2","1"],n=e[0],o=e[1],r=A.indexOf(n);return{row:s.indexOf(o),col:r}}engineStateToBoard(){const e=this.engine.exportJson(),A=Array(8).fill(null).map(()=>Array(8).fill(null));for(const[s,n]of Object.entries(e.pieces)){const o=this.squareToCoords(s),r=this.parsePiece(n);r!==null&&(A[o.row][o.col]=r)}return A}parsePiece(e){if(typeof e!="string"||e.length!==1)return null;const A=e===e.toUpperCase(),n={K:"king",Q:"queen",R:"rook",B:"bishop",N:"knight",P:"pawn"}[e.toUpperCase()];return n?{type:n,color:A?"white":"black"}:null}newGame(){this.engine=new window.jsChessEngine.Game,this.selectedSquare=null,this.possibleMoves=[],this.moveHistory=[],this.currentMoveIndex=-1,this.initialEngineState=JSON.parse(JSON.stringify(this.engine.exportJson())),this.colorChangedMidGame=!1,this.originalHumanColor=this.humanColor,this.stateHistory=[],this.currentStateIndex=0,this.isInUndoRedoState=!1;const e=this.engine.exportJson();this.stateHistory.push({engineState:JSON.parse(JSON.stringify(e)),move:null,captured:null,notation:null,commentary:null}),this.updateCachedState(),this.updateGameStatus(),this.boardFlipped=this.determineOrientation(),this.playSound("newGame")}setGameMode(e){this.gameMode=e}setHumanColor(e){this.gameMode==="human-vs-bot"&&this.moveHistory&&this.moveHistory.length>0&&(this.colorChangedMidGame=e!==this.originalHumanColor),this.humanColor=e,this.boardFlipped=this.determineOrientation()}setBotDifficulty(e){this.gameMode==="human-vs-bot"&&this.moveHistory&&this.moveHistory.length>0&&(this.difficultyChangedMidGame=e!==this.originalBotDifficulty),this.botDifficulty=e}setBotDifficulty(e){this.gameMode==="human-vs-bot"&&this.moveHistory&&this.moveHistory.length>0&&(this.difficultyChangedMidGame=e!==this.originalBotDifficulty),this.botDifficulty=e}getGameMode(){return this.gameMode}getHumanColor(){return this.humanColor}shouldFlipBoard(){return this.gameMode==="human-vs-bot"&&this.humanColor==="black"}determineOrientation(){this.boardFlipped;let e=!1;return this.gameMode==="human-vs-human"?this.orientationMode==="none"?e=!1:this.orientationMode==="table"?e=this.currentPlayer==="black":this.orientationMode==="handoff"&&(e=this.currentPlayer==="black"):e=this.humanColor==="black",e}setCorrectBoardPerspective(){const e=this.shouldFlipBoard();return this.boardFlipped!==e?(this.boardFlipped=e,!0):!1}getGameState(){const e=this.engine.exportJson();return{board:this.board,currentPlayer:this.currentPlayer,gameStatus:this.gameStatus,moveHistory:this.moveHistory,stateHistory:this.stateHistory,currentStateIndex:this.currentStateIndex,selectedSquare:this.selectedSquare,possibleMoves:this.possibleMoves,gameMode:this.gameMode,humanColor:this.humanColor,botDifficulty:this.botDifficulty,allowUndo:this.allowUndo,boardFlipped:this.boardFlipped,orientationMode:this.orientationMode,castlingRights:this.castlingRights,enPassantTarget:this.enPassantTarget,soundEnabled:this.soundEnabled,engineState:e}}loadGameState(e,A={}){var n,o,r,l,g,u,f,P;if(e.engineState)this.engine=new window.jsChessEngine.Game(e.engineState);else{const E={pieces:{},turn:e.currentPlayer,castling:{whiteShort:((o=(n=e.castlingRights)==null?void 0:n.white)==null?void 0:o.kingside)||!1,whiteLong:((l=(r=e.castlingRights)==null?void 0:r.white)==null?void 0:l.queenside)||!1,blackShort:((u=(g=e.castlingRights)==null?void 0:g.black)==null?void 0:u.kingside)||!1,blackLong:((P=(f=e.castlingRights)==null?void 0:f.black)==null?void 0:P.queenside)||!1},enPassant:e.enPassantTarget||null},v=["A","B","C","D","E","F","G","H"],Q=["8","7","6","5","4","3","2","1"];for(let p=0;p<8;p++)for(let H=0;H<8;H++){const M=e.board[p][H];if(M){const I=v[H]+Q[p],U={pawn:"P",rook:"R",knight:"N",bishop:"B",queen:"Q",king:"K"}[M.type];E.pieces[I]=M.color==="white"?U:U.toLowerCase()}}this.engine=new window.jsChessEngine.Game(E)}if(this.selectedSquare=e.selectedSquare||null,this.possibleMoves=e.possibleMoves||[],A.preserveGameMode||(this.gameMode=e.gameMode||"human-vs-bot"),this.humanColor=e.humanColor||"white",this.botDifficulty=e.botDifficulty!==void 0?e.botDifficulty:1,this.allowUndo=e.allowUndo!==void 0?e.allowUndo:!0,this.orientationMode=e.orientationMode||"handoff",this.boardFlipped=!1,this.soundEnabled=e.soundEnabled!==void 0?e.soundEnabled:!0,this.moveHistory=e.moveHistory||[],this.moveHistory.length>100-1&&(this.moveHistory=this.moveHistory.slice(-99)),this.currentMoveIndex=e.currentMoveIndex!==void 0?e.currentMoveIndex:this.moveHistory.length-1,e.initialEngineState)this.initialEngineState=JSON.parse(JSON.stringify(e.initialEngineState));else{const E=new window.jsChessEngine.Game;this.initialEngineState=JSON.parse(JSON.stringify(E.exportJson()))}if(!this.initialEngineState.pieces||!this.initialEngineState.pieces.E2){const E=new window.jsChessEngine.Game;this.initialEngineState=JSON.parse(JSON.stringify(E.exportJson()))}if(this.updateCachedState(),this.boardFlipped=this.determineOrientation(),e.stateHistory&&e.stateHistory.length>0){this.stateHistory=e.stateHistory,this.currentStateIndex=e.currentStateIndex||e.stateHistory.length-1;const E=100;this.stateHistory.length>E&&(this.stateHistory.length-E,this.stateHistory=[this.stateHistory[0],...this.stateHistory.slice(-99)],this.currentStateIndex===e.stateHistory.length-1?this.currentStateIndex=this.stateHistory.length-1:this.currentStateIndex=Math.min(this.currentStateIndex,this.stateHistory.length-1))}else{this.stateHistory=[],this.currentStateIndex=0;const E=new window.jsChessEngine.Game;if(this.stateHistory.push({engineState:JSON.parse(JSON.stringify(E.exportJson())),move:null,notation:null,timestamp:Date.now()}),e.moveHistory&&e.moveHistory.length>0){const v=new window.jsChessEngine.Game;for(let Q=0;Q<e.moveHistory.length;Q++){const p=e.moveHistory[Q],H=this.coordsToSquare(p.from.row,p.from.col),M=this.coordsToSquare(p.to.row,p.to.col);try{v.move(H,M),this.stateHistory.push({engineState:JSON.parse(JSON.stringify(v.exportJson())),move:p,notation:p.notation||`${H}-${M}`,timestamp:Date.now()}),this.currentStateIndex++}catch{break}}}}}async autoSave(){try{const e=this.getGameState(),A=this.getStorageKey();return await te(A,e),await te("last_game_mode",{mode:this.gameMode,timestamp:Date.now()}),!0}catch{return!1}}getStorageKey(){return`chess_game_state_${this.gameMode.replace(/-/g,"_")}`}isHumanTurn(){return this.gameMode==="human-vs-human"?!0:this.currentPlayer===this.humanColor}getGameModeDisplayText(){return this.gameMode==="human-vs-human"?"Human vs Human":`Human (${this.humanColor}) vs Bot`}getBotDifficultyText(){return{0:"Random",1:"Ella",2:"Evy",3:"Emmy",4:"Asa"}[this.botDifficulty]||"Ella"}getColorOptions(){return[{value:"white",label:"White"},{value:"black",label:"Black"}]}getGameModeOptions(){return[{value:"human-vs-bot",label:"Human vs Bot"},{value:"human-vs-human",label:"Human vs Human"}]}createSoundSystem(){const e={},A=Se,s={moves:[A.move_1,A.move_2,A.move_3,A.move_4,A.move_5],quick:[A.quick_1,A.quick_2],pop_check:A.pop_check};let n=-1,o=!1,r=null;const l=()=>{if(!o)try{const u=window.AudioContext||window.webkitAudioContext;u&&!r&&(r=new u,r.state==="suspended"&&r.resume());const f=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhCDS");f.volume=.01,f.play().catch(()=>{}),o=!0}catch(u){console.log("Audio initialization failed:",u)}},g=(u,f=.4)=>{if(!this.soundEnabled||!u)return Promise.resolve();l();const P=new Audio(u);P.volume=f;const E=P.play();return E!==void 0?E.catch(v=>{v.name==="NotAllowedError"&&document.addEventListener("click",()=>{P.play().catch(()=>{})},{once:!0})}):Promise.resolve()};return e.move=()=>{const u=s.moves.map((P,E)=>E).filter(P=>P!==n),f=Math.floor(Math.random()*u.length);n=u[f],g(s.moves[n])},e.capture=()=>{const u=[...s.moves,...s.quick],f=Math.floor(Math.random()*u.length),P=u[f],E=u.filter((p,H)=>H!==f),v=Math.floor(Math.random()*E.length),Q=E[v];g(P,.25),setTimeout(()=>g(Q,.4),50)},e.check=()=>{g(s.pop_check)},e.checkmate=()=>{g(s.pop_check)},e.newGame=()=>{const u=Math.floor(Math.random()*s.moves.length);g(s.moves[u])},e.victory=()=>{g(s.pop_check)},e.gameEnd=()=>{const u=Math.floor(Math.random()*s.moves.length);g(s.moves[u])},e}playSound(e){this.sounds&&this.sounds[e]&&this.sounds[e]()}initializeBoard(){}isValidPosition(e,A){return e>=0&&e<8&&A>=0&&A<8}canUndo(){return this.allowUndo&&this.currentStateIndex>0}canRedo(){return this.allowUndo&&this.currentStateIndex<this.stateHistory.length-1}reconstructEngineState(e){if(e===0)return this.stateHistory[0].engineState;const A=this.stateHistory[0].engineState;if(!A)return null;const s=new window.jsChessEngine.Game(JSON.parse(JSON.stringify(A)));for(let n=1;n<=e;n++){const o=this.stateHistory[n].move;if(!o)break;const r=this.coordsToSquare(o.from.row,o.from.col),l=this.coordsToSquare(o.to.row,o.to.col);try{s.move(r,l)}catch{break}}return s.exportJson()}undoMove(){if(!this.canUndo())return!1;const e=this.stateHistory[this.currentStateIndex],A=e&&e.captured;this.currentStateIndex--;const s=this.stateHistory[this.currentStateIndex];let n;return s.engineState?n=JSON.parse(JSON.stringify(s.engineState)):n=this.reconstructEngineState(this.currentStateIndex),n?(this.engine=new window.jsChessEngine.Game(n),this.updateCachedState(),this.updateGameStatus(),this.board=this.engineStateToBoard(),this.selectedSquare=null,this.possibleMoves=[],this.isInUndoRedoState=!0,A?this.playSound("capture"):this.playSound("move"),this.gameStatus==="checkmate"?setTimeout(()=>this.playSound("checkmate"),A?100:0):this.gameStatus==="check"&&setTimeout(()=>this.playSound("check"),A?100:0),!0):!1}redoMove(){if(!this.canRedo())return!1;this.currentStateIndex++;const e=this.stateHistory[this.currentStateIndex];let A;if(e.engineState?A=JSON.parse(JSON.stringify(e.engineState)):A=this.reconstructEngineState(this.currentStateIndex),!A)return!1;this.engine=new window.jsChessEngine.Game(A),this.updateCachedState(),this.updateGameStatus(),this.board=this.engineStateToBoard(),e.move,this.selectedSquare=null,this.possibleMoves=[],this.isInUndoRedoState=!0;const s=e.move&&e.move.captured;return s?this.playSound("capture"):this.playSound("move"),this.gameStatus==="checkmate"?setTimeout(()=>this.playSound("checkmate"),s?100:0):this.gameStatus==="check"&&setTimeout(()=>this.playSound("check"),s?100:0),!0}getCurrentMoveIndex(){return this.currentStateIndex-1}getCapturedPieces(){const e=[],A=[];for(let n=1;n<=this.currentStateIndex&&n<this.stateHistory.length;n++){const o=this.stateHistory[n];o.move&&o.move.captured&&(o.move.captured.color==="white"?e.push(o.move.captured):A.push(o.move.captured))}const s={queen:1,rook:2,bishop:3,knight:4,pawn:5};return e.sort((n,o)=>(s[n.type]||6)-(s[o.type]||6)),A.sort((n,o)=>(s[n.type]||6)-(s[o.type]||6)),{whiteCaptured:e,blackCaptured:A}}validateGameState(){return!0}coordsToChessNotation(e,A){return this.coordsToSquare(e,A)}generateMoveNotation(e,A,s,n,o,r,l,g){const u=this.coordsToSquare(e,A),f=this.coordsToSquare(s,n);return`${u}-${f}`}generateMoveCommentary(e,A,s,n,o,r,l){this.coordsToSquare(e,A);const g=this.coordsToSquare(s,n),u=o.color.charAt(0).toUpperCase()+o.color.slice(1);return r?`${u} ${o.type} captures ${g} ${r.type}`:`${u} ${o.type} to ${g}`}calculateMaterialBalance(){const e={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:0};let A=0,s=0;for(let n=0;n<8;n++)for(let o=0;o<8;o++){const r=this.board[n][o];if(r){const l=e[r.type]||0;r.color==="white"?A+=l:s+=l}}return A-s}countPieces(){let e=0;for(let A=0;A<8;A++)for(let s=0;s<8;s++)this.board[A][s]&&e++;return e}calculateBoardChecksum(e){return JSON.stringify(e).length}calculateMoveHistoryChecksum(e){return e.length}testSaveLoadCycle(){return Promise.resolve(!0)}getPieceSymbol(e){var s;return e&&((s={king:{white:"♚",black:"♚"},queen:{white:"♛",black:"♛"},rook:{white:"♜",black:"♜"},bishop:{white:"♝",black:"♝"},knight:{white:"♞",black:"♞"},pawn:{white:"♟︎",black:"♟︎"}}[e.type])==null?void 0:s[e.color])||""}isInCheck(){const e=this.engine.exportJson();return e.check||e.checkMate}}let D,y;class Ge{constructor(e){this.game=e,this.boardElement=document.getElementById("chess-board"),this.moveDisplayElement=document.getElementById("move-display"),this.gameStatusElement=document.getElementById("game-status"),this.isFlipping=!1,this.inputEnabled=!0,this.lastAlertTime=0,this.alertCooldown=1e3,this.audioInitialized=!1;const A=()=>{this.audioInitialized||(this.game.playSound("move"),this.audioInitialized=!0,document.removeEventListener("click",A),document.removeEventListener("touchstart",A))};document.addEventListener("click",A,{once:!0}),document.addEventListener("touchstart",A,{once:!0});const s=document.getElementById("move-expand");s&&s.addEventListener("click",()=>{const n=s.dataset.fullText;n&&this.showNotification(n,"info",3e3)}),this.initializeBoard(),this.updateDisplay(),this.checkInitialBotTurn()}initializeBoard(){this.boardElement.innerHTML="";for(let e=0;e<8;e++)for(let A=0;A<8;A++){const s=document.createElement("div");s.className="chess-square",s.dataset.row=e,s.dataset.col=A;const n=(e+A)%2===0;s.classList.add(n?"light-square":"dark-square"),s.addEventListener("click",async o=>await this.handleSquareClick(o)),s.addEventListener("touchstart",o=>this.handleTouchStart(o)),s.addEventListener("touchend",async o=>await this.handleTouchEnd(o)),s.addEventListener("touchcancel",o=>this.handleTouchCancel(o)),this.boardElement.appendChild(s)}this.applyTheme()}async handleSquareClick(e){const A=parseInt(e.target.dataset.row),s=parseInt(e.target.dataset.col);await this.handleSquareSelection(A,s)}handleTouchStart(e){e.preventDefault(),this.touchStartTime=Date.now(),this.touchTarget=e.target,e.target.style.opacity="0.7"}async handleTouchEnd(e){if(e.preventDefault(),this.touchTarget&&(this.touchTarget.style.opacity=""),this.touchStartTime&&Date.now()-this.touchStartTime<500){let A=e.target;for(;A&&!A.dataset.row;)A=A.parentElement;if(A&&A.dataset.row!==void 0){const s=parseInt(A.dataset.row),n=parseInt(A.dataset.col);await this.handleSquareSelection(s,n)}}this.touchStartTime=null,this.touchTarget=null}handleTouchCancel(e){e.preventDefault(),this.touchTarget&&(this.touchTarget.style.opacity=""),this.touchStartTime=null,this.touchTarget=null}getLogicalCoordinates(e,A){const s=this.game.gameMode==="human-vs-bot",n=this.game.orientationMode==="table";return this.game.boardFlipped&&(s||n)?{row:7-e,col:7-A}:{row:e,col:A}}getDisplayCoordinates(e,A){const s=this.game.gameMode==="human-vs-bot",n=this.game.orientationMode==="table";return this.game.boardFlipped&&(s||n)?{row:7-e,col:7-A}:{row:e,col:A}}flipBoard(e){this.isFlipping||(this.isFlipping=!0,this.boardElement.style.transform="rotateY(90deg)",this.boardElement.style.transition="transform 0.3s ease-in-out",setTimeout(()=>{const A=this.game.determineOrientation();this.game.boardFlipped=A,this.updateDisplay(),this.boardElement.style.transform="rotateY(0deg)",setTimeout(()=>{this.boardElement.style.transition="",this.isFlipping=!1,e&&e()},150)},150))}updateBoardPerspective(){if(this.isFlipping)return;const e=this.game.boardFlipped,A=this.boardElement.classList.contains("flipped");e&&!A?this.boardElement.classList.add("flipped"):!e&&A&&this.boardElement.classList.remove("flipped"),this.updateDisplay()}async handleBotTurn(){if(this.game.isPerformingRedo)return;const e=this.game.gameMode,A=this.game.isBotTurn(),s=this.game.gameStatus;if(this.game.currentPlayer,this.game.getHumanColor(),e!=="human-vs-bot"||!A)return;if(s!=="playing"&&s!=="check"){this.showBotThinking(!1),this.setInputEnabled(!1);return}const n=(!this.game.moveHistory||this.game.moveHistory.length===0)&&A;this.setInputEnabled(!1),this.showBotThinking(!0),this.updateGameStateIndicators();let o=null,r=!1;this.game.botDifficulty>=3&&(o=setTimeout(()=>{r=!0,console.log(`Showing bot thinking notification for ${this.game.getBotDifficultyText()}`),this.showNotification(`${this.game.getBotDifficultyText()} is analyzing deeply...`,"info",1e4)},5e3));try{n&&await new Promise(g=>setTimeout(g,500));const l=await this.game.executeBotMove();if(o&&clearTimeout(o),r){const g=document.getElementById("instruction-label");g&&!g.classList.contains("hidden")&&(g.classList.add("hidden"),this.notificationTimeout&&(clearTimeout(this.notificationTimeout),this.notificationTimeout=null))}l&&l.success?(this.updateDisplay(),l.enteredCheck&&this.highlightKing(this.game.humanColor),this.showBotThinking(!1),this.game.gameStatus==="checkmate"||this.game.gameStatus==="stalemate"?(this.setInputEnabled(!1),this.handleGameEnd()):this.setInputEnabled(!0)):(this.showBotThinking(!1),this.showNotification("Bot move failed - your turn","error"),this.setInputEnabled(!0),setTimeout(()=>{this.hideInstructionLabel()},3e3))}catch{this.showBotThinking(!1),this.setInputEnabled(!0),this.showNotification("Bot error - your turn","error"),setTimeout(()=>{this.hideInstructionLabel()},3e3)}}setInputEnabled(e){this.inputEnabled=e,e?(this.boardElement.style.opacity="1",this.boardElement.style.pointerEvents="auto"):(this.boardElement.style.opacity="0.7",this.boardElement.style.pointerEvents="none")}showBotThinking(e){const A=this.game.gameMode,s=this.game.isBotTurn(),n=this.game.gameStatus,o=document.getElementById("instruction-label"),r=document.getElementById("move-display");if(e&&A==="human-vs-bot"&&s&&(n==="playing"||n==="check")){if(o&&!o.textContent.includes("analyzing deeply")&&this.hideInstructionLabel(),r&&!document.querySelector(".bot-thinking-spinner")){const l=document.createElement("div");l.className="bot-thinking-spinner",r.parentElement.appendChild(l)}this.inputEnabled&&this.setInputEnabled(!1),this.updatePlayerTurnIndicator(this.game.currentPlayer,A)}else{this.hideInstructionLabel();const l=document.querySelector(".bot-thinking-spinner");l&&l.remove(),A==="human-vs-bot"&&this.updatePlayerTurnIndicator(this.game.currentPlayer,A)}}hideInstructionLabel(){const e=document.getElementById("instruction-label");e&&(e.classList.add("hidden"),e.textContent="")}handleGameEnd(){const e=this.game.gameStatus,A=this.game.currentPlayer;this.setInputEnabled(!1);let s=!1;if(e==="checkmate"){const n=A==="white"?"Black":"White";this.game.gameMode==="human-vs-bot"?(this.game.humanColor==="white"&&n==="White"||this.game.humanColor==="black"&&n==="Black")&&(s=!0):s=!0}this.game.soundEnabled&&this.game.sounds&&(s?this.game.sounds.victory():this.game.sounds.gameEnd())}updateGameStateIndicators(){this.game.gameStatus;const e=this.game.currentPlayer,A=this.game.gameMode;this.updatePlayerTurnIndicator(e,A),this.updateCapturedPiecesDisplay(),this.updateMoveHistoryDisplay()}updatePlayerTurnIndicator(e,A){const s=document.getElementById("current-player");if(!s)return;let n="";try{const l=this.game.calculateMaterialBalance();e==="white"?l>0?n=` (+${l})`:l<0&&(n=` (${l})`):l<0?n=` (+${Math.abs(l)})`:l>0&&(n=` (-${l})`)}catch{}let o="",r=`player-indicator ${e}`;if(A==="human-vs-bot"){this.game.getHumanColor();const l=this.game.isBotTurn(),g=this.game.gameStatus;if(g==="checkmate"||g==="stalemate")o=`Game Over (${g})`,r+=" game-ended";else if(g==="check")l?(o="Bot's turn",r+=" bot-turn check"):(o="Your turn",r+=" human-turn check");else if(l){const u=document.getElementById("instruction-label");u&&!u.classList.contains("hidden")&&u.textContent.includes("Bot is thinking")?(o="Bot is thinking...",r+=" bot-thinking"):(o="Bot's turn",r+=" bot-turn")}else o="Your turn",r+=" human-turn"}else o=`${e.charAt(0).toUpperCase()+e.slice(1)}'s turn`;s.textContent=o,s.className=r}updateCapturedPiecesDisplay(){const e=document.getElementById("captured-pieces");if(!e)return;const{whiteCaptured:A,blackCaptured:s}=this.game.getCapturedPieces(),n=this.game.gameMode,o=this.game.getHumanColor();e.innerHTML="";const r=this.game.calculateMaterialBalance(),l=this.createMaterialBalanceBar(r,n,o);e.appendChild(l);const g=document.createElement("div");g.className="captured-section left";const u=document.createElement("div");if(u.className="captured-section right",n==="human-vs-bot"){const P=o==="white",E=P?s:A,v=P?A:s,Q=document.createElement("span");Q.className="captured-label",Q.textContent="White",g.appendChild(Q);const p=document.createElement("span");p.className="captured-pieces-list",p.textContent=E.length>0?E.map(I=>this.game.getPieceSymbol(I)).join(""):"-",g.appendChild(p),g.dataset.pieceCount=E.length;const H=document.createElement("span");H.className="captured-label",H.textContent="Black",u.appendChild(H);const M=document.createElement("span");M.className="captured-pieces-list",M.textContent=v.length>0?v.map(I=>this.game.getPieceSymbol(I)).join(""):"-",u.appendChild(M),u.dataset.pieceCount=v.length}else{const P=document.createElement("span");P.className="captured-label",P.textContent="White",g.appendChild(P);const E=document.createElement("span");E.className="captured-pieces-list",E.textContent=s.length>0?s.map(p=>this.game.getPieceSymbol(p)).join(""):"-",g.appendChild(E),g.dataset.pieceCount=s.length;const v=document.createElement("span");v.className="captured-label",v.textContent="Black",u.appendChild(v);const Q=document.createElement("span");Q.className="captured-pieces-list",Q.textContent=A.length>0?A.map(p=>this.game.getPieceSymbol(p)).join(""):"-",u.appendChild(Q),u.dataset.pieceCount=A.length}const f=document.createElement("div");f.className="captured-sections-wrapper",f.appendChild(g),f.appendChild(u),e.appendChild(f),e.style.display="flex"}createMaterialBalanceBar(e,A,s){const n=document.createElement("div");n.className="material-balance-bar";const o=Math.max(0,Math.min(100,(e+39)/78*100)),r=document.createElement("div");let l="balance-indicator";return A==="human-vs-bot"&&(s==="white"&&e>0||s==="black"&&e<0?l+=" human-advantage":e!==0&&(l+=" bot-advantage")),r.className=l,r.style.width=`${o}%`,n.appendChild(r),n}updateMoveHistoryDisplay(){const e=document.getElementById("move-history");if(!e||this.game.currentStateIndex<=0)return;const A=this.game.stateHistory.slice(1,this.game.currentStateIndex+1),s=A.slice(-6);let n='<div class="move-history-title">Recent Moves:</div>';s.forEach((o,r)=>{const l=A.indexOf(o)+1,g=this.game.gameMode==="human-vs-bot"&&o.move&&o.move.piece&&o.move.piece.color!==this.game.humanColor;n+=`
        <div class="move-entry ${g?"bot-move":"human-move"}">
          <span class="move-player">${g?"🤖":"👤"}</span>
          <span class="move-notation">${o.notation}</span>
          <span class="move-number">#${l}</span>
        </div>
      `}),e.innerHTML=n}checkInitialBotTurn(){if(this.game.gameMode!=="human-vs-bot")return;this.game.getHumanColor(),this.game.currentPlayer;const e=this.game.isBotTurn();if(!((this.game.moveHistory?this.game.moveHistory.length:0)>0)&&!(this.game.gameStatus==="checkmate"||this.game.gameStatus==="stalemate")){if(this.game.gameStatus!=="playing"){setTimeout(()=>{this.checkInitialBotTurn()},500);return}e?(this.showBotThinking(!0),this.setInputEnabled(!1),this.updateGameStateIndicators(),setTimeout(()=>{const s=this.game.isBotTurn(),n=!this.game.moveHistory||this.game.moveHistory.length===0;this.game.gameStatus==="playing"&&s&&n?this.handleBotTurn():n||(this.showBotThinking(!1),this.setInputEnabled(!0),this.updateGameStateIndicators())},1e3)):(this.setInputEnabled(!0),this.showBotThinking(!1),this.updateGameStateIndicators())}}onNewGameStart(){this.updateDisplay(),(!this.game.moveHistory||this.game.moveHistory.length===0)&&this.checkInitialBotTurn()}async handleSquareSelection(e,A){if(this.isFlipping||this.inputEnabled===!1)return;if(this.game.gameMode==="human-vs-bot"&&this.game.isBotTurn())if(this.game.isInUndoRedoState){const r=this.getLogicalCoordinates(e,A),l=r.row,g=r.col,u=this.game.board[l][g];if(this.game.lastUndoWasBotMove?this.showNotification("Bot turn - scroll wheel to redo or make your move","warning"):this.showNotification("Bot turn - scroll wheel to redo or make your move","warning"),!(u&&u.color===this.game.humanColor))return}else{const r=document.getElementById("instruction-label");(!r||r.classList.contains("hidden")||!r.textContent.includes("Bot is thinking"))&&this.showNotification("Bot turn","info");return}const s=this.getLogicalCoordinates(e,A),n=s.row,o=s.col;if(this.game.selectedSquare){const r=this.game.selectedSquare.row,l=this.game.selectedSquare.col;if(r===n&&l===o)this.game.selectedSquare=null;else if(this.game.getPossibleMoves(r,l).find(f=>f.row===n&&f.col===o)){this.game.gameStatus;const f=await this.game.makeMove(r,l,n,o);if(f&&f.success){if(this.game.isInUndoRedoState=!1,this.game.lastUndoWasBotMove=!1,this.game.selectedSquare=null,f.enteredCheck&&this.highlightKing(this.game.currentPlayer),!(this.game.gameMode==="human-vs-human"&&!this.game.isUndoRedoAction)){if(this.game.gameMode==="human-vs-bot"&&!this.game.isUndoRedoAction){const P=this.game.gameStatus==="playing"||this.game.gameStatus==="check",E=this.game.isBotTurn();P&&E?(this.showBotThinking(!0),this.setInputEnabled(!1),this.updateGameStateIndicators(),setTimeout(()=>{this.handleBotTurn()},150)):this.game.gameStatus==="checkmate"||this.game.gameStatus==="stalemate"?this.setInputEnabled(!1):this.setInputEnabled(!0)}}}else this.game.selectedSquare=null}else{const f=this.game.board[n][o];if(f&&f.color===this.game.currentPlayer){this.game.selectedSquare={row:n,col:o},this.updateDisplay();return}this.game.isInCheck()?this.highlightKing(this.game.currentPlayer):this.game.selectedSquare=null}}else{const r=this.game.board[n][o];r&&r.color===this.game.currentPlayer&&(this.game.selectedSquare={row:n,col:o})}this.updateDisplay()}updateDisplay(){const e=document.getElementById("game-container");e.classList.remove("orientation-table","orientation-handoff","orientation-none");const A=this.game.gameMode==="human-vs-bot"?"none":this.game.orientationMode;e.setAttribute("data-orientation-mode",A),e.setAttribute("data-board-flipped",this.game.boardFlipped.toString()),e.setAttribute("data-game-mode",this.game.gameMode),e.setAttribute("data-current-player",this.game.currentPlayer);const s=this.boardElement.children;for(let l=0;l<s.length;l++){const g=s[l],u=parseInt(g.dataset.row),f=parseInt(g.dataset.col),P=this.getLogicalCoordinates(u,f),E=this.game.board[P.row][P.col];if(g.innerHTML="",g.classList.remove("selected","valid-move","white-move","black-move","last-move"),E){const v=document.createElement("div");v.className=`chess-piece ${E.color}`,v.setAttribute("data-piece",E.type),v.textContent=this.game.getPieceSymbol(E),g.appendChild(v),P.row===1&&P.col===4||P.row===3&&P.col}if(this.game.selectedSquare&&this.game.selectedSquare.row===P.row&&this.game.selectedSquare.col===P.col&&g.classList.add("selected"),this.game.selectedSquare&&this.game.getPossibleMoves(this.game.selectedSquare.row,this.game.selectedSquare.col).some(Q=>Q.row===P.row&&Q.col===P.col)&&(g.classList.add("valid-move"),g.classList.add(this.game.currentPlayer==="white"?"white-move":"black-move")),this.game.currentStateIndex>0&&this.game.currentStateIndex<this.game.stateHistory.length){const v=this.game.stateHistory[this.game.currentStateIndex];if(v&&v.move){const Q=v.move;(Q.from.row===P.row&&Q.from.col===P.col||Q.to.row===P.row&&Q.to.col===P.col)&&g.classList.add("last-move")}}}this.game.calculateMaterialBalance(),this.game.currentPlayer;const n=document.getElementById("move-display"),o=document.getElementById("move-expand"),r=document.getElementById("move-info");if(n){let l="";if(this.game.currentStateIndex>0&&this.game.currentStateIndex<this.game.stateHistory.length){const g=this.game.stateHistory[this.game.currentStateIndex];if(g&&g.move){const u=g.commentary||g.notation;let f="";this.game.gameStatus==="checkmate"?f='<span style="color: #FE5F00;"> - Checkmate!</span>':this.game.gameStatus==="check"?f='<span style="color: #FE5F00;"> - Check!</span>':this.game.gameStatus==="stalemate"&&(f='<span style="color: #FE5F00;"> - Stalemate!</span>'),l=u+f}}l||(this.game.gameMode==="human-vs-human"?l="Human vs Human • Ready to play":l=`Bot (${this.game.getBotDifficultyText()}) • Ready to play`),l.includes("<span")?n.innerHTML=l:n.textContent=l,setTimeout(()=>{n.scrollWidth>n.clientWidth&&o&&r?(r.classList.add("has-overflow"),o.dataset.fullText=n.textContent):r&&r.classList.remove("has-overflow")},0)}this.gameStatusElement.textContent="",this.updateGameStateIndicators(),this.game.gameStatus!=="playing"&&this.game.gameStatus!=="check"&&setTimeout(()=>{this.handleGameEnd()},300)}applyTheme(){const e={light:"#ddb88c",dark:"#a0522d",lightTexture:"radial-gradient(circle at 25% 25%, #c9a876 0%, transparent 50%), radial-gradient(circle at 75% 75%, #c9a876 0%, transparent 50%)",darkTexture:"radial-gradient(circle at 25% 25%, #8b4513 0%, transparent 50%), radial-gradient(circle at 75% 75%, #8b4513 0%, transparent 50%)"};document.documentElement.style.setProperty("--light-square",e.light),document.documentElement.style.setProperty("--dark-square",e.dark);const A=this.boardElement.children;for(let s=0;s<A.length;s++){const n=A[s],o=parseInt(n.dataset.row),r=parseInt(n.dataset.col);(o+r)%2===0?(n.style.backgroundColor=e.light,n.style.backgroundImage=e.lightTexture):(n.style.backgroundColor=e.dark,n.style.backgroundImage=e.darkTexture)}}showMessage(e){this.gameStatusElement.textContent=e,setTimeout(()=>{this.updateDisplay()},2e3)}showOptionsMenu(){const e=document.getElementById("options-overlay");if(e){e.classList.remove("hidden"),this.game.originalGameMode=this.game.gameMode,this.game.originalHumanColor=this.game.humanColor,this.game.colorChangedMidGame=!1,this.game.originalBotDifficulty=this.game.botDifficulty,this.game.difficultyChangedMidGame=!1;const A=document.getElementById("options-menu");A&&(A.scrollTop=0),this.updateOptionsButtons(),e.dataset.listenersAdded||(this.setupOptionsEventListeners(),e.dataset.listenersAdded="true")}}hideOptionsMenu(){const e=document.getElementById("options-overlay");e&&e.classList.add("hidden");const A=this.game.determineOrientation();this.game.boardFlipped!==A&&(this.game.boardFlipped=A,this.updateDisplay()),this.game.gameMode==="human-vs-bot"&&this.game.moveHistory.length===0&&setTimeout(()=>{this.checkInitialBotTurn()},100)}updateOptionsButtons(){const e=document.getElementById("options-title");if(e){const v=this.game.gameMode==="human-vs-human"?"Human vs Human":"Human vs Bot";e.textContent=`Chess R1 - ${v}`}const A=document.getElementById("back-btn");if(A){const v=this.game.moveHistory&&this.game.moveHistory.length>0,Q=this.game.stateHistory&&this.game.stateHistory.length>1,p=v||Q,H=this.game.gameMode!==this.game.originalGameMode,M=this.game.colorChangedMidGame,I=this.game.difficultyChangedMidGame;p?(M||I)&&!H?(A.disabled=!0,M&&I?A.textContent="Start new game (settings changed)":M?A.textContent="Start new game (color changed)":A.textContent="Start new game (difficulty changed)",A.classList.add("disabled")):(A.disabled=!1,A.textContent="Back to game",A.classList.remove("disabled")):(A.disabled=!0,A.textContent="Back to game (no moves yet)",A.classList.add("disabled"))}document.querySelectorAll('input[name="gameMode"]').forEach(v=>{v.checked=v.value===this.game.gameMode}),document.querySelectorAll('input[name="playerColor"]').forEach(v=>{v.checked=v.value===this.game.humanColor}),document.querySelectorAll('input[name="soundEffects"]').forEach(v=>{v.checked=v.value==="on"===this.game.soundEnabled}),document.querySelectorAll('input[name="allowUndo"]').forEach(v=>{v.checked=v.value==="on"===this.game.allowUndo}),document.querySelectorAll('input[name="botDifficulty"]').forEach(v=>{v.checked=v.value===String(this.game.botDifficulty)});const g=document.getElementById("color-group");g&&(this.game.gameMode==="human-vs-bot"?(g.style.display="block",g.offsetHeight):g.style.display="none");const u=document.getElementById("difficulty-group");u&&(this.game.gameMode==="human-vs-bot"?(u.style.display="block",u.offsetHeight):u.style.display="none");const f=document.getElementById("orientation-mode-group");f&&(this.game.gameMode==="human-vs-human"?(f.style.display="block",f.offsetHeight):f.style.display="none");const P=document.getElementById("undo-group");P&&(P.style.display="block",P.offsetHeight),document.querySelectorAll('input[name="orientationMode"]').forEach(v=>{v.checked=v.value===this.game.orientationMode})}setupOptionsEventListeners(){document.querySelectorAll('input[name="gameMode"]').forEach(f=>{f.addEventListener("change",async()=>{if(f.checked&&f.value!==this.game.gameMode)try{const P=this.game.gameMode;await this.game.autoSave(),this.game.setGameMode(f.value),te("last_game_mode",{mode:f.value,timestamp:Date.now()}),this.game.colorChangedMidGame=!1,this.game.originalHumanColor=this.game.humanColor,this.game.difficultyChangedMidGame=!1,this.game.originalBotDifficulty=this.game.botDifficulty;const E=this.game.getStorageKey(),v=localStorage.getItem(E);if(v)try{const H=JSON.parse(v)}catch{}const Q=await X(E);let p=!1;try{p=Q&&this.isValidSavedState(Q)}catch{p=!1}p?(this.game.loadGameState(Q,{preserveGameMode:!0}),this.updateDisplay(),this.showMessage(`Switched to ${f.value==="human-vs-human"?"Human vs Human":"Human vs Bot"} - Game restored!`)):(this.game.newGame(),this.onNewGameStart(),this.showMessage(`Switched to ${f.value==="human-vs-human"?"Human vs Human":"Human vs Bot"} - New game started!`))}catch{this.game.newGame(),this.onNewGameStart()}finally{this.updateOptionsButtons(),setTimeout(()=>{this.updateOptionsButtons(),document.getElementById("color-group"),document.getElementById("difficulty-group"),document.getElementById("orientation-mode-group"),document.getElementById("undo-group")},10)}})}),document.querySelectorAll('input[name="playerColor"]').forEach(f=>{f.addEventListener("change",()=>{f.checked&&(this.game.setHumanColor(f.value),this.game.autoSave(),this.updateOptionsButtons())})}),document.querySelectorAll('input[name="soundEffects"]').forEach(f=>{f.addEventListener("change",()=>{if(f.checked){const P=f.value==="on";this.game.soundEnabled=P,this.game.autoSave()}})}),document.querySelectorAll('input[name="allowUndo"]').forEach(f=>{f.addEventListener("change",()=>{if(f.checked){const P=f.value==="on";this.game.allowUndo=P,this.game.autoSave()}})}),document.querySelectorAll('input[name="botDifficulty"]').forEach(f=>{f.addEventListener("change",()=>{if(f.checked){const P=parseInt(f.value);this.game.setBotDifficulty(P),this.game.autoSave(),this.updateOptionsButtons()}})});const r=document.getElementById("new-game-btn"),l=document.getElementById("back-btn"),g=document.getElementById("options-overlay");r&&r.addEventListener("click",()=>{this.confirmNewGame()}),l&&l.addEventListener("click",()=>{this.hideOptionsMenu()}),document.querySelectorAll('input[name="orientationMode"]').forEach(f=>{f.addEventListener("change",()=>{if(f.checked){this.game.orientationMode=f.value;const P={table:"Table mode: Entire screen rotates for players sitting across",handoff:"Handoff mode: Pass device between players",none:"No rotation: Board stays fixed"};this.showMessage(P[f.value]),this.game.autoSave()}})}),g&&g.addEventListener("click",f=>{f.target===g&&this.hideOptionsMenu()})}confirmNewGame(){this.clearSavedState(),this.game.newGame(),this.updateDisplay(),this.hideOptionsMenu(),this.game.gameMode==="human-vs-bot"&&this.game.humanColor==="black"&&setTimeout(()=>{this.game.gameStatus==="playing"&&this.game.isBotTurn()&&this.checkInitialBotTurn()},1500),this.showMessage("New game started!")}async clearSavedState(){const A=[this.game.getStorageKey(),"chess_game_state"];if(window.creationStorage)try{for(const s of A)await window.creationStorage.plain.removeItem(s)}catch{}else try{for(const s of A)localStorage.removeItem(s)}catch{}}showNotification(e,A="default",s=null){const n=document.getElementById("instruction-label");if(!n)return;s===null&&(s=A==="warning"||A==="error"?3e3:2e3);const o=e.includes("Bot move undone")||e.includes("Bot turn");(A==="warning"||A==="error")&&this.notificationCooldown&&!o||(this.notificationTimeout&&clearTimeout(this.notificationTimeout),n.textContent=e,n.classList.remove("hidden"),n.style.backgroundColor="#FE5F00",n.style.color="white",n.style.fontWeight="bold",(A==="warning"||A==="error")&&(this.notificationCooldown=!0),this.notificationTimeout=setTimeout(()=>{n.classList.add("hidden"),n.style.backgroundColor="",n.style.color="",n.style.fontWeight="",(A==="warning"||A==="error")&&setTimeout(()=>{this.notificationCooldown=!1},500)},s))}showInstructionLabel(e){this.showNotification(e,"default",2e3)}showBotUndoAlert(e){this.showNotification(e,"warning",3e3)}showCheckAlert(e){this.showNotification(e,"warning",3e3)}highlightKing(e){for(let A=0;A<8;A++)for(let s=0;s<8;s++){const n=this.game.board[A][s];if(n&&n.type==="king"&&n.color===e){const o=this.getDisplayCoordinates(A,s),r=this.boardElement.children[o.row*8+o.col];r&&(r.classList.contains("king-warning")||(r.classList.add("king-warning"),setTimeout(()=>{r.classList.remove("king-warning")},2e3)));return}}}animateUndoRedo(e,A=!1){const s=this.boardElement;if(s){const g=window.getComputedStyle(s).transform,u=g&&g!=="none",f=e==="undo"?.98:1.02;u?s.style.transform=`${g} scale(${f})`:s.style.transform=`scale(${f})`,s.style.transition="transform 0.1s ease",setTimeout(()=>{u?s.style.transform=g:s.style.transform="scale(1)",setTimeout(()=>{s.style.transform="",s.style.transition=""},100)},100)}const n=this.game.getCurrentMoveIndex(),o=this.game.moveHistory?this.game.moveHistory.length:0,r=Math.ceil((n+1)/2);e==="undo"&&A&&(this.game.lastUndoWasBotMove=!0),e==="undo"?n>=0?this.showInstructionLabel(`At move ${r} (${n+1}/${o})`):this.showInstructionLabel("At start of game"):e==="redo"&&this.showInstructionLabel(`At move ${r} (${n+1}/${o})`)}verifyUIConsistency(){const e=[];try{const A=document.getElementById("current-player");if(A){const l=A.textContent.toLowerCase();l.includes(this.game.currentPlayer)||e.push(`Current player display mismatch: UI shows "${l}", game state is "${this.game.currentPlayer}"`)}const s=document.getElementById("move-count");if(s){const l=this.game.getCurrentMoveIndex(),g=l>=0?Math.ceil((l+1)/2):0,u=s.textContent;u.includes(g.toString())||e.push(`Move count display mismatch: UI shows "${u}", expected move number ${g}`)}const n=this.boardElement.children;let o=0;for(let l=0;l<n.length;l++){const g=n[l],u=parseInt(g.dataset.row),f=parseInt(g.dataset.col),P=this.game.board[u][f],E=g.querySelectorAll(".chess-piece"),v=E.length>0,Q=P!==null;if(v!==Q)o++;else if(Q&&v){const p=E[0],H=this.game.getPieceSymbol(P);p.textContent!==H&&o++}}o>0&&e.push(`Board display has ${o} piece mismatches with game state`);const r=document.getElementById("game-status");if(r&&r.textContent.trim()){const l=r.textContent.toLowerCase();this.game.gameStatus==="checkmate"&&!l.includes("checkmate")?e.push(`Game status display mismatch: game is checkmate but UI shows "${l}"`):this.game.gameStatus==="stalemate"&&!l.includes("stalemate")&&e.push(`Game status display mismatch: game is stalemate but UI shows "${l}"`)}return!(e.length>0)}catch{return!1}}updateMenuVisibility(){const e=document.getElementById("color-group"),A=document.getElementById("difficulty-group"),s=document.getElementById("orientation-mode-group");this.game.gameMode==="human-vs-human"?(e&&(e.style.display="none"),A&&(A.style.display="none"),s&&(s.style.display="block")):(e&&(e.style.display="block"),A&&(A.style.display="block"),s&&(s.style.display="none"))}getLatestTimestamp(e){if(!e)return 0;if(e.stateHistory&&e.stateHistory.length>0){const A=e.stateHistory[e.stateHistory.length-1];if(A&&A.timestamp)return A.timestamp}return e.moveHistory&&e.moveHistory.length>0?1:0}async loadGameState(){try{const e=await X("last_game_mode"),A=(e==null?void 0:e.mode)||null,s="chess_game_state_human_vs_bot",n="chess_game_state_human_vs_human",o=await X(s),r=await X(n);let l=null,g=null;if(A&&(A==="human-vs-human"&&r?(l=r,g="human-vs-human"):A==="human-vs-bot"&&o&&(l=o,g="human-vs-bot")),!l)if(o&&r){const u=this.getLatestTimestamp(o);this.getLatestTimestamp(r)>u?(l=r,g="human-vs-human"):(l=o,g="human-vs-bot")}else r?(l=r,g="human-vs-human"):o&&(l=o,g="human-vs-bot");return l||(l=await X("chess_game_state"),l&&(g=l.gameMode||"human-vs-bot")),l?this.isValidSavedState(l)?(g&&(this.game.gameMode=g),this.game.loadGameState(l),this.applyTheme(),this.updateDisplay(),this.updateMenuVisibility(),!0):(await this.clearSavedState(),!1):!1}catch{return await this.clearSavedState(),!1}}isValidSavedState(e){if(!e||typeof e!="object"||!e.board||!Array.isArray(e.board)||e.moveHistory&&!Array.isArray(e.moveHistory)||e.board.length!==8)return!1;for(let o=0;o<e.board.length;o++){const r=e.board[o];if(!Array.isArray(r)||r.length!==8)return!1}if(!e.currentPlayer||e.currentPlayer!=="white"&&e.currentPlayer!=="black")return!1;const s=(e.moveHistory||[]).length,n=e.totalMoves||s;return!!(s>0||e.currentPlayer==="black"||e.gameStatus&&(e.gameStatus==="checkmate"||e.gameStatus==="stalemate")||e.currentMoveIndex!==void 0&&e.currentMoveIndex>=0||n>0||this.boardDiffersFromInitial(e.board))}boardDiffersFromInitial(e){if(!e||!Array.isArray(e))return!1;const A=this.game?this.game.initializeBoard():this.initializeBoard();for(let s=0;s<8;s++){if(!e[s]||!Array.isArray(e[s]))return!1;for(let n=0;n<8;n++){const o=e[s][n],r=A[s][n];if(!(o===null&&r===null)&&(o===null||r===null||o.type!==r.type||o.color!==r.color))return!0}}return!1}}window.addEventListener("scrollUp",async()=>{if(D&&y)if(D.allowUndo){let C=!1;if(D.gameMode==="human-vs-bot"&&D.currentStateIndex<D.stateHistory.length-1){const e=D.stateHistory[D.currentStateIndex+1];e&&e.move&&e.move.piece&&(C=e.move.piece.color!==D.humanColor)}D.redoMove()&&(D.selectedSquare=null,y.updateDisplay(),y.animateUndoRedo("redo",C),y.updatePlayerTurnIndicator(D.currentPlayer,D.gameMode),y.updateCapturedPiecesDisplay(),y.updateMoveHistoryDisplay(),await D.autoSave(),D.gameMode==="human-vs-bot"?(D.isBotTurn(),y.showBotThinking(!1),y.setInputEnabled(!0)):D.gameMode==="human-vs-human"&&y.setInputEnabled(!0))}else y.showInstructionLabel("Push button to enable undo")});window.addEventListener("scrollDown",async()=>{if(D&&y)if(D.allowUndo){let C=!1;if(D.gameMode==="human-vs-bot"&&D.currentStateIndex>0){const A=D.stateHistory[D.currentStateIndex];A&&A.move&&A.move.piece&&(C=A.move.piece.color!==D.humanColor)}D.undoMove()&&(D.selectedSquare=null,y.updateDisplay(),y.animateUndoRedo("undo",C),y.updatePlayerTurnIndicator(D.currentPlayer,D.gameMode),y.updateCapturedPiecesDisplay(),y.updateMoveHistoryDisplay(),await D.autoSave(),D.gameMode==="human-vs-bot"?(D.isBotTurn(),y.showBotThinking(!1),y.setInputEnabled(!0)):D.gameMode==="human-vs-human"&&y.setInputEnabled(!0))}else y.showInstructionLabel("Push button to enable undo")});let me=0;const Fe=300;window.addEventListener("sideClick",()=>{const C=Date.now();C-me<Fe||(me=C,D&&y&&y.showOptionsMenu())});window.addEventListener("longPressStart",()=>{});window.addEventListener("longPressEnd",()=>{D&&y&&(y.clearSavedState(),D.newGame(),y.updateDisplay(),y.showMessage("New game started!"),Ce("new_game_started"))});window.onPluginMessage=function(C){if(C.data)try{const e=typeof C.data=="string"?JSON.parse(C.data):C.data}catch{}C.message};function Ce(C,e={}){if(typeof PluginMessageHandler<"u"){const A={message:`Chess game event: ${C}`,gameEvent:C,details:e,wantsR1Response:!1,wantsJournalEntry:!1};PluginMessageHandler.postMessage(JSON.stringify(A))}}function Te(C,e,A=365){const s=new Date;s.setTime(s.getTime()+A*24*60*60*1e3);const n=typeof e=="string"?e:JSON.stringify(e),o=encodeURIComponent(n),r=`${C}=${o}; expires=${s.toUTCString()}; path=/; SameSite=Lax`;if(r.length>4096)try{localStorage.setItem(C,n);return}catch{}document.cookie=r}function Le(C){const e=C+"=",A=document.cookie.split(";");for(let s=0;s<A.length;s++){let n=A[s].trim();if(n.indexOf(e)===0)try{const o=decodeURIComponent(n.substring(e.length));try{return JSON.parse(o)}catch{return o}}catch{return null}}return null}async function te(C,e){if(!C||typeof C!="string"||e==null)return!1;if(window.creationStorage&&window.creationStorage.plain&&typeof window.creationStorage.plain.setItem=="function")try{const s=JSON.stringify(e),n=btoa(s);return await window.creationStorage.plain.setItem(C,n),!0}catch{}try{return Te(C,e),!0}catch{}try{const s=JSON.stringify(e);return localStorage.setItem(C,s),!0}catch{}return!1}async function X(C){if(window.creationStorage&&window.creationStorage.plain&&typeof window.creationStorage.plain.getItem=="function")try{const A=await window.creationStorage.plain.getItem(C);if(A){const s=atob(A);return JSON.parse(s)}}catch{}try{const A=Le(C);if(A)return A}catch{}try{const A=localStorage.getItem(C);if(A)return JSON.parse(A)}catch{}return null}document.addEventListener("DOMContentLoaded",async()=>{typeof PluginMessageHandler>"u"&&window.addEventListener("keydown",o=>{o.code==="KeyP"&&(o.preventDefault(),window.dispatchEvent(new CustomEvent("sideClick"))),o.code==="ArrowLeft"&&(o.preventDefault(),window.dispatchEvent(new CustomEvent("scrollDown"))),o.code==="ArrowRight"&&(o.preventDefault(),window.dispatchEvent(new CustomEvent("scrollUp")))}),D=new ke,y=new Ge(D);const C=document.getElementById("color-group"),e=document.getElementById("difficulty-group"),A=document.getElementById("orientation-mode-group"),s=document.getElementById("undo-group");C&&(C.style.display="block"),e&&(e.style.display="block"),A&&(A.style.display="none"),s&&(s.style.display="block"),await y.loadGameState()?(y.updateDisplay(),y.updateCapturedPiecesDisplay(),y.gameStatusElement.textContent="Game resumed",setTimeout(()=>{y.gameStatusElement.textContent=""},2e3)):(D.newGame(),y.updateDisplay()),y.updateCapturedPiecesDisplay(),Ce("game_initialized",{theme:D.theme,currentPlayer:D.currentPlayer})});window.addEventListener("beforeunload",C=>{});window.addEventListener("unload",C=>{});window.addEventListener("visibilitychange",()=>{});
