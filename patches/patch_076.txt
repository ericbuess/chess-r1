PATCH 076 (MultiEdit #1)
Timestamp: 2025-09-19T01:33:18.115Z
Source: ffaff44a-3ad1-4a5b-af21-d1a9c631be74.jsonl:187
File: /Users/ericbuess/Projects/chess-r1/app/src/main.js
Replace All: False
============================================================

OLD STRING:
----------------------------------------
  showBotThinking(show) {
    const gameMode = this.game.gameMode;
    const isBotTurn = this.game.isBotTurn();
    const gameStatus = this.game.gameStatus;
    
    debugLogger.debug('UI_SYNC', 'Bot thinking indicator update', {
      show,
      gameMode,
      isBotTurn,
      gameStatus,
      inputEnabled: this.inputEnabled
    });
    
    const instructionLabel = document.getElementById('instruction-label');
    
    if (show && gameMode === 'human-vs-bot' && isBotTurn && (gameStatus === 'playing' || gameStatus === 'check')) {
      // Don't show redundant instruction label - turn indicator already shows bot thinking
      // Just remove any existing instruction label
      this.hideInstructionLabel();
      
      // Ensure input is disabled when bot is thinking
      if (this.inputEnabled) {
        this.setInputEnabled(false);
      }
      
      // Update turn indicator to reflect bot thinking state
      this.updatePlayerTurnIndicator(this.game.currentPlayer, gameMode);
      
    } else {
      // Hide thinking indicator
      this.hideInstructionLabel();
      
      // Update turn indicator when thinking stops
      if (gameMode === 'human-vs-bot') {
        this.updatePlayerTurnIndicator(this.game.currentPlayer, gameMode);
      }
    }
  }
----------------------------------------

NEW STRING:
----------------------------------------
  showBotThinking(show) {
    const gameMode = this.game.gameMode;
    const isBotTurn = this.game.isBotTurn();
    const gameStatus = this.game.gameStatus;

    debugLogger.debug('UI_SYNC', 'Bot thinking indicator update', {
      show,
      gameMode,
      isBotTurn,
      gameStatus,
      inputEnabled: this.inputEnabled
    });

    const instructionLabel = document.getElementById('instruction-label');
    const moveDisplay = document.getElementById('move-display');

    if (show && gameMode === 'human-vs-bot' && isBotTurn && (gameStatus === 'playing' || gameStatus === 'check')) {
      // Don't show redundant instruction label - turn indicator already shows bot thinking
      // Just remove any existing instruction label
      this.hideInstructionLabel();

      // Add spinner to move display
      if (moveDisplay && !document.querySelector('.bot-thinking-spinner')) {
        const spinner = document.createElement('div');
        spinner.className = 'bot-thinking-spinner';
        moveDisplay.parentElement.appendChild(spinner);
      }

      // Ensure input is disabled when bot is thinking
      if (this.inputEnabled) {
        this.setInputEnabled(false);
      }

      // Update turn indicator to reflect bot thinking state
      this.updatePlayerTurnIndicator(this.game.currentPlayer, gameMode);

    } else {
      // Hide thinking indicator
      this.hideInstructionLabel();

      // Remove spinner
      const spinner = document.querySelector('.bot-thinking-spinner');
      if (spinner) {
        spinner.remove();
      }

      // Update turn indicator when thinking stops
      if (gameMode === 'human-vs-bot') {
        this.updatePlayerTurnIndicator(this.game.currentPlayer, gameMode);
      }
    }
  }
----------------------------------------
